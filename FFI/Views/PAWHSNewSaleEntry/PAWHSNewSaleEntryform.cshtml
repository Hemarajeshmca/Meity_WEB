
@{ ViewBag.Form = "Sale Entry";
                Layout = "~/Views/Shared/FormViewLayout1.cshtml"; }
<form id="NewActualProc_form" class="form-horizontal" data-role="validator" novalidate="novalidate">
    <div class="panel panel-default">
        <div class="panel-body">
            <div class="row" style="padding-bottom:1px">
                <div class="col-xs-4" style="display:none">
                    <div class="form-group">
                        <label for="txt_produ_cate" class=" col-sm-5 control-label">Lot No.</label>
                        <div class=" col-sm-6">
                            <input type="text" id="txt_LotNo" name="IOU_lotno" class="form-control" maxlength="50">
                        </div>
                    </div>
                </div>
                <div class="col-xs-4">
                    <div class=" form-group">
                        <label for="txt_pro_name" class=" col-sm-5 control-label">Sale No</label>
                        <div class=" col-sm-6">
                            <input type="text" id="txt_sale_no" name="IOU_sale_no" class="form-control" maxlength="50">
                        </div>
                    </div>
                </div>
                <div class="col-xs-4">
                    <div class="form-group">
                        <label for="txt_hsn_code" class=" col-sm-5 control-label">Buyer Name</label>
                        <div class=" col-sm-6">
                            <input type="text" id="txt_buyer_Name" name="In_buyer_name" class="form-control" maxlength="50">
                        </div>
                    </div>
                </div>
                <div class="col-xs-4">
                    <div class=" form-group">
                        <label for="txt_pro_cde" class=" col-sm-5 control-label">Crop Variety</label>
                        <div class=" col-sm-6">
                            @*<input type="text" id="txt_Item_Code" name="In_item_code" class="form-control" maxlength="50">*@
                            <input type="text" id="txt_Item_Code" name="In_crop_variety" class="form-control" maxlength="50">
                        </div>
                    </div>
                </div>

            </div>
            <div class="row" style="padding-bottom:1px">


                <div class="col-xs-4">
                    <div class=" form-group">
                        <label for="txt_produ_sub_cate" class=" col-sm-5 control-label">Crop Name</label>
                        <div class=" col-sm-6">
                            <input type="text" id="txt_Item_Name" name="In_item_name" class="form-control" maxlength="50">
                            <input type="hidden" id="txtact_rowid" name="IOU_sale_rowid">
                            <input type="hidden" id="txtMode" name="In_mode_flag" class="form-control" maxlength="10" value="I">
                            <input type="hidden" id="txt_row_timestamp" name="In_row_timestamp" class="form-control" maxlength="10">
                        </div>
                    </div>
                </div>
                <div class="col-xs-4">
                    <div class=" form-group">
                        <label for="txt_pro_cde" class=" col-sm-5 control-label">Quantity sale( in Quintal)</label>
                        <div class=" col-sm-6">
                            <input type="text" id="txt_sale_qty" name="In_sale_qty" class="form-control" maxlength="50">
                        </div>
                    </div>
                </div>
                <div class="col-xs-4">
                    <div class=" form-group">
                        <label for="txt_produ_sub_cate" class=" col-sm-5 control-label">Pickup Date</label>
                        <div class=" col-sm-6">
                            <input type="text" id="txt_sale_date" name="In_sale_date" class="form-control" maxlength="50">
                        </div>
                    </div>
                </div>
                <div class="col-xs-4" style="display:none">
                    <div class=" form-group">
                        <label for="txt_pro_cde" class=" col-sm-5 control-label">Sale Price</label>
                        <div class=" col-sm-6">
                            <input type="text" id="txt_sale_price" name="In_sale_price" class="form-control" maxlength="50">
                        </div>
                    </div>
                </div>
            </div>
            <div class="row" style="padding-bottom:1px">
                <div class="col-xs-4" style="display:none">
                    <div class=" form-group">
                        <label for="txt_produ_sub_cate" class=" col-sm-5 control-label">Sale Value</label>
                        <div class=" col-sm-6">
                            <input type="text" id="txt_sale_value" name="In_sale_value" class="form-control" maxlength="50">
                        </div>
                    </div>
                </div>
                <div class="col-xs-4" style="display:none">
                    <div class=" form-group">
                        <label for="txt_produ_sub_cate" class=" col-sm-5 control-label">Advance Amount</label>
                        <div class=" col-sm-6">
                            <input type="text" id="txt_advance_amt" name="In_advance_amt" class="form-control" maxlength="50">
                        </div>
                    </div>
                </div>
                <div class="col-xs-4">
                    <div class=" form-group">
                        <label for="txt_produ_sub_cate" class=" col-sm-5 control-label">No.of Bags</label>
                        <div class=" col-sm-6">
                            <input type="text" id="txt_bags" name="In_no_of_bags" class="form-control" maxlength="50">
                        </div>
                    </div>
                </div>
                <div class="col-xs-4" style="display:none">
                    <div class=" form-group">
                        <label for="txt_produ_sub_cate" class=" col-sm-5 control-label">Bank Acc No</label>
                        <div class=" col-sm-6">
                            <input type="text" id="txt_bank_acc_no" name="In_bank_acc_no" class="form-control" maxlength="50">
                        </div>
                    </div>
                </div>
                <div class="col-xs-4" style="display:none">
                    <div class=" form-group">
                        <label for="txt_produ_sub_cate" class=" col-sm-5 control-label">Cheque No</label>
                        <div class=" col-sm-6">
                            <input type="text" id="txt_cheque_no" name="In_cheque_no" class="form-control" maxlength="50">
                        </div>
                    </div>
                </div>
                <div class="col-xs-4">
                    <div class=" form-group">
                        <label for="txt_produ_sub_cate" class=" col-sm-5 control-label">Sale Remarks</label>
                        <div class=" col-sm-6">
                            <input type="text" id="txt_sale_remarks" name="In_sale_remarks" class="form-control" maxlength="50">
                        </div>
                    </div>
                </div>
                <div class="col-xs-4">
                    <div class=" form-group">
                        <label for="txt_qcperson_name" class=" col-sm-5 control-label">Quality Person Name</label>
                        <div class=" col-sm-6">
                            <input type="text" id="txt_qcperson_name" name="In_Qcperson_name" class="form-control" maxlength="50">
                        </div>
                    </div>
                </div>
                <div class="col-xs-4">
                    <div class=" form-group">
                        <div class=" col-sm-6">
                            <button type="button" id="txt_billimage" onclick="AttachmentFile()" style="background-color: #3c8dbc;">View Image</button>
                        </div>
                    </div>
                </div>
                <div class="col-xs-4" style="display:none">
                    <div class=" form-group">
                        <label for="txt_produ_sub_cate" class=" col-sm-5 control-label">Status</label>
                        <div class=" col-sm-6">
                            <input type="text" id="txt_status" name="In_status" class="form-control" maxlength="50">
                        </div>
                    </div>
                </div>
                <div class="col-xs-4" style="display:none">
                    <div class=" form-group">
                        <label for="txt_vehicletype" class=" col-sm-5 control-label">Vehicle Type</label>
                        <div class=" col-sm-6">
                            <input type="text" id="txt_vehicletype" name="in_vehicle_type" class="form-control" maxlength="225">
                        </div>
                    </div>
                </div>
            </div>
            <div class="row" style="padding-bottom:1px">
                <div class="col-xs-4" style="display:none">
                    <div class=" form-group">
                        <label for="txt_produ_sub_cate" class=" col-sm-5 control-label">Pickup Date</label>
                        <div class=" col-sm-6">
                            <input type="text" id="txt_pickup_date" name="In_pickup_date" class="form-control" maxlength="50">
                        </div>
                    </div>
                </div>
                <div class="col-xs-4" style="display:none">
                    <div class=" form-group">
                        <label for="txt_produ_sub_cate" class=" col-sm-5 control-label">Payment Type</label>
                        <div class=" col-sm-6">
                            <input type="text" id="txt_payment_type" name="In_payment_type" class="form-control" maxlength="50">
                        </div>
                    </div>
                </div>
                
            </div>
            <div class="row" style="padding-bottom:1px">
            </div>
            <div class="row" style="padding-bottom:1px">
                <div class="col-xs-4" style="display:none">
                    <div class=" form-group">
                        <label for="txt_vehicleno" class=" col-sm-5 control-label">Vehicle No</label>
                        <div class=" col-sm-6">
                            <input type="text" id="txt_vehicleno" name="In_Vehicle_no" class="form-control" maxlength="50">
                        </div>
                    </div>
                </div>
                
               
            </div>
            <div class="row" style="padding-bottom:1px">
                <div class="col-xs-4" style="display:none">
                    <div class=" form-group">
                        <label for="txt_qcperson_name" class=" col-sm-5 control-label">LRP Name</label>
                        <div class=" col-sm-6">
                            <input type="text" id="txt_Lrpname" name="in_LRP_Name" class="form-control" maxlength="225">
                        </div>
                    </div>
                </div>
                <div class="col-xs-4" style="display:none">
                    <div class=" form-group">
                        <label for="txt_qcperson_name" class=" col-sm-5 control-label">LRP Mobile no</label>
                        <div class=" col-sm-6">
                            <input type="text" id="txt_LRP_Mobile_no" name="in_LRP_Mobile_no" class="form-control" maxlength="225">
                        </div>
                    </div>
                </div>
            </div>

            <div class="row" style="padding-bottom:1px">
                <div class="col-xs-4" style="display:none">
                    <div class=" form-group">
                        <label for="txt_produ_sub_cate" class=" col-sm-5 control-label">Warehouse Name</label>
                        <div class=" col-sm-6">
                            <input type="text" id="txt_whs_name" name="In_whs_name" class="form-control" maxlength="50">
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <section class="col-md-12">
                <div id="tab_list" class="col-md-12">
                    <ul class="nav nav-tabs">
                        <li class="active">
                            <a href="#Quantity" id="data1" role="tab" onclick="qtytab()" data-toggle="tab">
                                Serial No
                            </a>
                        </li>
                    </ul>
                    <div class="tab-content">

                        <div class="tab-pane fade active in" id="Quantity">
                            <div class="panel panel-default">
                                <div class="panel-body">
                                    <div id="grid_Quantity">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </div>
    <input type="hidden" id="txtagg_code" name="Out_agg_code">
    <div id="dialogFileAttachment">       
        <div class="form-group">       
            <div class="geeks">           
                <a id="imgchnge" download="farmer_img.jpg" href="~/images/NoImage.png" title="ImageName">
                    Download
                    <img id="farmer_img" src="~/images/NoImage.png" class="col-sm-3 img-bordered profileImg1" alt="Bill Image" dow style="height:100%;left: 35%;" ; />
                </a>             
            </div>
        </div>
    </div>
    <div id="dialog" style="display:none;">
        <button type="button" id="btnsaveShipment" style="margin-left:18px;margin-top:-7px" class="btn btn-info" onclick="saveshipment()"><span class="glyphicon glyphicon-ok"></span> Save</button>
        <input type="hidden" id="tax_rate" name="In_tax_rate">
        <div id="grid_shipment"></div>
    </div>
</form>
<script>
    click_act_name = "PAWHSNewSaleEntryList";
    click_ctrl_name = "PAWHSNEWSALEENTRY";
    form_list_url = '../' + click_ctrl_name + '/' + click_act_name;
</script>

<script src="~/API_Scripts/UmoldITWebAPIProxy.js"></script>
<script src="~/CommonScripts/common.js"></script>
<script src="~/CommonScripts/tamil.js"></script>
<script src="~/CommonScripts/HelpFile.js"></script>
<script>
    $(document).ready(function () {
        kendodate_format();
        $("#bottom_menus").hide();
        //$("#divCreate").hide();
        //$("#divEdit").hide();
        //$("#divView").show();
        //$('#frmlayerdiv').hide();
        //$('#divUserRole8').show();
        //$('#divUserRole8 #review').hide();
        $("#hide_div").hide();
        //$("#divScreen").hide();
        $("#dialogFileAttachment").hide();
        New_grid_Quantity_details([]);


        Form_validate_Name = $('form.form-horizontal').attr('id');
        var container = $("#NewActualProc_form");
        kendo.init(container);
        container.kendoValidator({
        });
        Screen_Id = "PWNEWACTPRO";
        permission = sec_Permission(Screen_Id);

        var org_id = getlocalStorage('org_id');
        var org_type = getlocalStorage('org_type');
        var orgtname = getlocalStorage('orgtname');
        var org = getlocalStorage('org');
        //   $('#txtagg_code').val(org_id);

        if (getlocalStorage('btn_clk_val') == "View") {
            debugger;
            $("#bottom_menus").hide();          
            $("#hide_div").hide();
            if (getlocalStorage("ls_pageList") != undefined) {
                var data = getlocalStorage("ls_pageList");
                var formval = form_Serialize("NewActualProc_form");
                var obj_val = JSON.parse(formval);
                obj_val.Out_sale_rowid = data.Out_sale_rowid;
                obj_val.Out_saleno = data.Out_saleno;
                obj_val.Out_agg_code = data.Out_agg_code;
                var data = {};
                data.context = WebAPIProxy.getContext();
                data.context.Header = obj_val;
                //Item Master Edit Binding  start 18-05-2020
                var Context = data.context;
                $.ajax({
                    type: "POST",
                    data: JSON.stringify({
                        userId: Context.userId, orgnId: Context.orgnId, locnId: Context.locnId, localeId: Context.localeId,
                        IOU_sale_rowid: Context.Header.Out_sale_rowid,
                        IOU_sale_no: Context.Header.Out_saleno,
                        IOU_agg_code: Context.Header.Out_agg_code,
                    }),
                    // IOU_act_rowid: Context.Header.IOU_act_rowid1, IOU_agg_code: Context.Header.Out_agg_code, IOU_lotno: Context.Header.IOU_lotno1 }),
                    url: "/PAWHSNEWSALEENTRY/saleentryfetch",
                    dataType: "json",
                    contentType: 'application/json; charset=utf-8',
                    success: function (response) {
                        if (response.context != null) {
                            generate_ActualProcurement_header(response.context.Header);
                            var data = response.context.SlnoDetail
                            for (var i = 0; i < data.length; i++) {
                                data[i].QlyDetail = JSON.stringify(data[i].QlyDetail);
                            }
                            grid_Quantity_details(data);
                        }
                        else {
                            console.log(response);
                        }
                    },
                    error: function (er) {
                        alert(er);
                        console.log(er);
                    }

                });
            }
        }
        viewdisable();
    });

    function downloadImage() {
        var data = { base64: imgstring };
        $.ajax({
          url: '@Url.Action("DownloadImage", "PAWHSNewActualProcurement")',
          type: "post",
          contentType: 'application/x-www-form-urlencoded',
          data: data,
           success: function (response) {
            },
            error: function (er) {
                alert(er);
                console.log(er);
            }
        });
    }


    function AttachmentFile() {
        debugger;
        $("#dialogFileAttachment").kendoWindow();
        var dialog = $("#dialogFileAttachment").data("kendoWindow");
        dialog.open().element.closest(".k-window").css({
            top: 121,
            left: 300, height: 400, width: 900
        });
        dialog.title("Bill Image");    
    }
    function generate_ActualProcurement_header(res) {
        debugger;
        try {
            if (res != null) {
                $("#txtMode").val("U");
                $("#DocStat").val("Active");
                $("#txtact_rowid").val(res.IOU_sale_rowid);
                $("#txtagg_code").val(res.IOU_agg_code);
                $("#txt_LotNo").val(res.IOU_lotno);
                $("#txt_sale_no").val(res.IOU_sale_no);
                $("#txt_buyer_Name").val(res.In_buyer_name);
                $("#txt_Item_Code").val(res.In_crop_variety);
                $("#txt_Item_Name").val(res.In_item_name);
                $("#txt_sale_qty").val(res.In_sale_qty);
                $("#txt_sale_price").val(res.In_sale_price);
                $("#txt_sale_value").val(res.In_sale_value);
                $("#txt_sale_date").val(res.In_sale_date);
                $("#txt_advance_amt").val(res.In_advance_amt);
                $("#txt_pickup_date").val(res.In_pickup_date);
                $("#txt_bags").val(res.In_no_of_bags);
                $("#txt_payment_type").val(res.In_payment_type);
                $("#txt_bank_acc_no").val(res.In_bank_acc_no);
                $("#txt_cheque_no").val(res.In_cheque_no);
                $("#txt_status").val(res.In_status);
                $("#txt_sale_remarks").val(res.In_sale_remarks);
                $("#txt_vehicletype").val(res.In_vehicle_type);
                $("#txt_vehicleno").val(res.In_vehicle_no);
                $("#txt_qcperson_name").val(res.In_qcperson_name);
                $("#txt_Lrpname").val(res.In_LRP_Name);
                $("#txt_LRP_Mobile_no").val(res.In_LRP_Mobile_no);
                $("#txt_whs_name").val(res.In_whs_name);

                var imagedata = res.In_sale_attach
                if (imagedata != "") {
                    document.getElementById("farmer_img").src = "data:image/png;base64," + imagedata;
                    $("#imgchnge").attr("href", "data: image / png; base64," + imagedata);
                }
                else {
                    document.getElementById("farmer_img").src = "/images/noimage.png";
                    $("#imgchnge").attr("href", "data/images/noimage.png");
                }

            }
        }
        catch (err) {
            javascript_log4j_root(arguments.callee.name, err);
        }
    }
</script>

<script>

    function New_grid_Quantity_details(data) {
        try {
            $("#grid_Quantity").kendoGrid({
                dataSource: {
                    data: data,
                    schema: {
                        model: {
                            fields: {                            
                                In_slno_row_id: { type: "string" },
                                In_agg_code: { type: "string" },
                                In_lotno: { type: "string" },
                                In_slno: { type: "string" },
                                In_temp1: { type: "double" },
                                In_temp2: { type: "double" },
                                In_qty: { type: "double" },
                                Out_mode_flag: { type: "string" },
                                QlyDetail: { type: "string" },
                                In_PO_serialno: { type: "string" },
                                In_PO_lotno: { type: "string" },
                                In_farmername: { type: "string" }
                            }
                        }
                    }
                },
                //  toolbar: "<a class='k-grid-add' id='btnSave' href=''><span class='fa fa-plus' style='color:Black'></span></a>",
                height: 250,
                groupable: false,
                dataBinding: setDefaultValues,

                dataBound: function (e) {
                    resultData = e.sender._data;
                    var rows = $('#grid_Quantity').data('kendoGrid').tbody.children();
                    setColor(rows, resultData);
                },
                sortable: true,
                selectable: true,
                navigatable: true,
                columns: [
                    {
                        field: "In_slno_row_id",
                        title: "Sl Rowid",
                        hidden: true
                    },
                    {
                        field: "In_agg_code",
                        title: "Agg Code",
                        hidden: true
                    },
                    {
                        field: "In_lotno",
                        title: "Lot No",
                        hidden: true
                    },
                    {
                        field: "In_slno",
                        title: "Serial No",
                    },
                    {
                        field: "In_PO_serialno",
                        title: "PO Serial No",
                        hidden: true
                    },
                    {
                        field: "In_PO_lotno",
                        title: "PO Lot No",
                    },
                    {
                        field: "In_farmername",
                        title: "Farmer Name",
                    },
                    {
                        field: "In_qty",
                        title: "Qty",
                        attributes: { style: "text-align:right;" },
                    },
                    {
                        field: "In_slno_rowid",
                        title: "In_slno_rowid",
                        hidden: true
                    },
                    {
                        field: "In_temp1",
                        title: "Temp 1",
                        hidden: true
                    },
                    {
                        field: "In_temp2",
                        title: "Temp 2",
                        hidden: true
                    },
                    {
                        field: "Out_mode_flag",
                        title: "orgn_dist",
                        hidden: true
                    },
                    {
                        field: "QlyDetail",
                        title: "Quality Detail",
                        hidden: true
                    },
                    {
                        command: [
                            {
                                name: "View",
                                id: "View",
                                text: "View QP",
                                click: function (e) {
                                    var grid = $("#grid_Quantity").data("kendoGrid");
                                    var dataItem = $("#grid_Quantity").data("kendoGrid").dataItem($(e.target).closest("tr"));
                                    shipmentView(e, dataItem, grid);
                                }
                            }
                        ]
                    },
                ],
                editable: false
            });
            $("#grid_Quantity .k-input").attr('disabled', 'false');
        }
        catch (err) {
            javascript_log4j_root(arguments.callee.name, err);
        }
    }

    function grid_qualityagainstslno(data) {
        try {
            $("#grid_SlnoQuantity").kendoGrid({
                dataSource: {
                    data: data,
                    schema: {
                        model: {
                            fields: {
                                In_qty_row_id: { type: "int" },
                                In_agg_code: { type: "string" },
                                In_sale_no: { type: "string" },
                                In_slno_rowid: { type: "string" },
                                In_slno: { type: "string" },
                                In_item_code: { type: "string" },
                                In_qly_code: { type: "string" },
                                In_actual_value: { type: "double" },
                                In_wr_qly_value: { type: "double" },
                                In_estimate_qly_value: { type: "string" },
                                Out_mode_flag: { type: "string" }
                            }
                        }
                    }
                },
                //  toolbar: "<a class='k-grid-add' id='btnSave' href=''><span class='fa fa-plus' style='color:Black'></span></a>",
                height: 250,
                groupable: false,
                dataBinding: setDefaultValues,
                dataBound: function (e) {
                    resultData = e.sender._data;
                    var rows = $('#grid_SlnoQuantity').data('kendoGrid').tbody.children();
                    setColor(rows, resultData);
                },
                sortable: true,
                selectable: true,
                navigatable: true,
                columns: [
                    {
                        field: "In_qty_row_id",
                        title: "Sl Rowid",
                        hidden: true
                    },
                    {
                        field: "In_agg_code",
                        title: "Agg Code",
                        hidden: true
                    },
                    {
                        field: "In_sale_no",
                        title: "Sale No",
                    },
                    {
                        field: "In_slno",
                        title: "Serial No",
                    },
                    {
                        field: "In_slno_rowid",
                        title: "In_slno_rowid",
                        hidden: true
                    },
                    {
                        field: "In_item_code",
                        title: "Item Code",
                    },
                    {
                        field: "In_qly_code",
                        title: "Quality Name",
                    },
                    {
                        field: "In_qly_code",
                        title: "Quality Code",
                        hidden: true
                    },
                    {
                        field: "In_actual_value",
                        title: "Actual Value",
                    },
                    {
                        field: "In_wr_qly_value",
                        title: "Quality Value",
                    },
                    {
                        field: "In_estimate_qly_value",
                        title: "Estimated Quality Value",
                        hidden: true
                    },
                    {
                        field: "Out_mode_flag",
                        title: "orgn_dist",
                        hidden: true
                    },
                ],
                editable: false
            });
            $("#grid_SlnoQuantity .k-input").attr('disabled', 'false');
        }
        catch (err) {
            javascript_log4j_root(arguments.callee.name, err);
        }
    }

    
    function grid_shipment(data) {
        try {
            $("#grid_shipment").kendoGrid({
                dataSource: {
                    data: data,
                    schema: {
                        model: {
                            fields: {
                                In_qty_row_id: { type: "int" },
                                In_agg_code: { type: "string" },
                                In_sale_no: { type: "string" },
                                In_slno_rowid: { type: "string" },
                                In_slno: { type: "string" },
                                In_item_code: { type: "string" },
                                In_qly_code: { type: "string" },
                                In_actual_value: { type: "double" },
                                //  In_wr_qly_value: { type: "double" },
                                //  In_estimate_qly_value: { type: "string" },
                                Out_mode_flag: { type: "string" }

                            }
                        }
                    }
                },
                //toolbar: "<a class='k-grid-add' id='btnSave1' href=''><span class='fa fa-plus' style='color:Black'></span></a>",
                height: 200,
                groupable: false,
                dataBinding: setDefaultValues,
                dataBound: function (e) {
                    resultData = e.sender._data;
                    var rows = $('#grid_shipment').data('kendoGrid').tbody.children();
                    setColor(rows, resultData);
                },
                save: function (data) {

                    if (data.values.In_address) {
                        combo();
                    }
                },
                //edit: OnEdit1,
                sortable: true,
                selectable: true,
                navigatable: true,
                columns: [
                    {
                        field: "unique_id",
                        title: "unique_id",
                        width: 100,
                        hidden: true
                    },
                    {
                        field: "In_qty_row_id",
                        title: "Sl Rowid",
                        hidden: true
                    },
                    {
                        field: "In_agg_code",
                        title: "Agg Code",
                        hidden: true
                    },
                    {
                        field: "In_sale_no",
                        title: "Sale No",
                    },
                    {
                        field: "In_slno",
                        title: "Serial No",
                    },
                    {
                        field: "In_slno_rowid",
                        title: "In_slno_rowid",
                        hidden: true
                    },
                    {
                        field: "In_item_code",
                        title: "Item Code",
                        hidden: true
                    },
                    {
                        field: "In_qly_code",
                        title: "Quality Description",
                    },
                    {
                        field: "In_actual_value",
                        title: "Actual Value",
                    },
                    //{
                    //    field: "In_wr_qly_value",
                    //    title: "Quality Value",
                    //},
                    //{
                    //    field: "In_estimate_qly_value",
                    //    title: "Estimated Quality Value",
                    //},
                    {
                        field: "Out_mode_flag",
                        title: "orgn_dist",
                        hidden: true
                    },

                ],
                editable: true,
            });
        }
        catch (err) {
            alert(err);
        }
    }

    function qtytab() {
        try {
            $("div#Quantity").toggleClass('tab-pane fade active in');
            $("div#Quantity").show();
            $("div#Othercost").hide();
            $("div#Serial").hide();
        }
        catch (err) {
            javascript_log4j_root(arguments.callee.name, err);
        }
    }

    function serialtab() {
        try {
            $("div#Serial").toggleClass('tab-pane fade active in');
            $("div#Serial").show();
            $("div#Quantity").hide();
            $("div#Othercost").hide();

        }
        catch (err) {
            javascript_log4j_root(arguments.callee.name, err);
        }
    }

    function Other() {
        try {
            $("div#Othercost").toggleClass('tab-pane fade active in');
            $("div#Othercost").show();
            $("div#Quantity").hide();
            $("div#Serial").hide();

        }
        catch (err) {
            javascript_log4j_root(arguments.callee.name, err);
        }
    }

    function grid_Quantity_details(res) {
        try {
            if (res != null) {
                var data = changedataType(res);
                //$("#gd_product").empty();
                //$("#gd_product").append("<div id='grid_Quantity'></div>");
                New_grid_Quantity_details(data);
            }
            else {
                New_grid_Quantity_details([]);
            }
        }
        catch (err) {
            javascript_log4j_root(arguments.callee.name, err);
        }
    }

    function grid_Serial_details(res) {
        try {
            if (res != null) {
                var data = changedataType(res);
                //$("#gd_product").empty();
                //$("#gd_product").append("<div id='grid_Quantity'></div>");
                New_grid_Serial_details(data);
            }
            else {
                New_grid_Serial_details([]);
            }
        }
        catch (err) {
            javascript_log4j_root(arguments.callee.name, err);
        }
    }

    function grid_Othercost_details(res) {
        try {
            if (res != null) {
                var data = changedataType(res);
                //$("#gd_product").empty();
                //$("#gd_product").append("<div id='grid_Quantity'></div>");
                New_grid_Othercost_details(data);
            }
            else {
                New_grid_Othercost_details([]);
            }
        }
        catch (err) {
            javascript_log4j_root(arguments.callee.name, err);
        }
    }
    function viewdisable() {
        $("#txt_LotNo").attr("disabled", true);
        $("#txt_sale_no").attr("disabled", true);
        $("#txt_buyer_Name").attr("disabled", true);
        $("#txt_Item_Code").attr("disabled", true);
        $("#txt_Item_Name").attr("disabled", true);
        $("#txt_sale_qty").attr("disabled", true);
        $("#txt_sale_price").attr("disabled", true);
        $("#txt_sale_value").attr("disabled", true);
        $("#txt_sale_date").attr("disabled", true);
        $("#txt_advance_amt").attr("disabled", true);
        $("#txt_pickup_date").attr("disabled", true);
        $("#txt_bags").attr("disabled", true);
        $("#txt_payment_type").attr("disabled", true);
        $("#txt_bank_acc_no").attr("disabled", true);
        $("#txt_cheque_no").attr("disabled", true);
        $("#txt_status").attr("disabled", true);
        $("#txt_sale_remarks").attr("disabled", true);
        $("#txt_vehicletype").attr("disabled", true);
        $("#txt_vehicleno").attr("disabled", true);
        $("#txt_qcperson_name").attr("disabled", true);
        $("#txt_Lrpname").attr("disabled", true);
        $("#txt_LRP_Mobile_no").attr("disabled", true);
        $("#txt_whs_name").attr("disabled", true);
    }
</script>
<script>
    function shipment(e, dataItem, grid) {
        $("#dialog").kendoWindow();
        var dialog = $("#dialog").data("kendoWindow");
        dialog.open().element.closest(".k-window").css({
            top: 121,
            left: 300, height: 400, width: 900
        });
        dialog.title("Quality Parameter Details");
        dialog.bind("open", shipment);
        $("#shipment_uid").val(dataItem.uid);
        $("#product_code").val(dataItem.product_code);
        $("#btnsaveShipment").show();
        var data = JSON.parse(dataItem.QlyDetail);
        if (data == undefined) {
            grid_shipment([]);
        }
        else {
            grid_shipment(data);
        }
    }
    function shipmentView(e, dataItem, grid) {
        $("#dialog").kendoWindow();
        var dialog = $("#dialog").data("kendoWindow");
        dialog.open().element.closest(".k-window").css({
            top: 121,
            left: 300, height: 400, width: 900
        });
        dialog.title("Quality Parameter Details");
        dialog.bind("open", shipment);
        $("#btnsaveShipment").hide();
        var data = JSON.parse(dataItem.QlyDetail);
        if (data == undefined) {
            grid_shipment([]);
        }
        else {
            grid_shipment(data);
        }
    }
</script>
<style>
    .k-widget.k-tooltip {
        background-color: #ffe79e;
        color: #6b5100;
    }

    span.k-tooltip {
        white-space: pre-line;
    }
</style>

