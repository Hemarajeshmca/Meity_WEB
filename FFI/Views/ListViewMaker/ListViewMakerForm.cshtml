@{
    ViewBag.Form = "Farmer Registration";
    ViewBag.helpName = "FarmerRegistration.html";
    Layout = "~/Views/Shared/FormViewLayout1.cshtml";
}
@using Kendo.Mvc.Extensions;
@using Microsoft.AspNetCore.Http;
@using System;
@using System.Collections.Generic;
@using System.Linq;
@inject IHttpContextAccessor HttpContextAccessor

@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
@addTagHelper *, Kendo.Mvc


@using Microsoft.Extensions.Configuration
@inject IConfiguration Configuration

@{

    string Instance = @Configuration.GetSection("AppSettings")["Instance"];
    //  string LoginMode = HttpContextAccessor.HttpContext.Session.GetString("Login_Role");

}
<script src="~/CommonScripts/common.js"></script>
<script src="~/CommonScripts/Hindi.js"></script>
<script>
    $(document).ready(function () {
        //farmer name
        $("#txtFarmer_nameEng").attr("readonly", false);
        langTranslate('txtFarmer_nameEng', 'txtFarmer_nameTn');
        //$("#txtFarmer_nameEng").attr("readonly", true);

        $("#txtFarmer_nameTn").on("keypress", function (e) {
            convertThis(e);
        });
        //surname
        langTranslate('txtsurname', 'txtsurname_II');
        $("#txtsurname_II").on("keypress", function (e) {
            convertThis(e);
        });
        //father name
        langTranslate('txtFHW_nameEN', 'txtFHW_nameIN');
        $("#txtFHW_nameIN").on("keypress", function (e) {
            convertThis(e);
        });
        //address 1
        langTranslate('txtaddressEn', 'txtaddressIn');
        $("#txtaddressIn").on("keypress", function (e) {
            convertThis(e);
        });
        //address 2
        langTranslate('txtaddress2En', 'txtaddress2In');
        $("#txtaddress2In").on("keypress", function (e) {
            convertThis(e);
        });

        function langTranslate(src, dest) {

            $("#" + src).focusout(function () {
                var id = $('#' + src).val();
                $("#HelpDiv").hide();
                if (id != "") {

                    $.ajax({
                        url: '@Url.Action("Foo", "ListViewMaker")',
                        type: 'GET',
                        dataType: 'json',
                        cache: false,
                        data: { 'id': id },
                        success: function (result) {
                            $('#' + dest).val(decodeEntities(result));
                        },
                        error: function () {
                            alert('Error occured');
                        }
                    });
                }
                else {
                    $('#' + dest).val("");
                    $("#HelpDiv").hide();
                }

            })
            $('#' + dest).focus(function () {
                $("#HelpDiv").html("")
            });

            $("body").click(function () {
                $("#HelpDiv").hide();
            });
            $("tab_list").click(function () {
                $("#HelpDiv").hide();
            });
        }

        function decodeEntities(input) {
            var y = document.createElement('textarea');
            y.innerHTML = input;
            return y.value;
        }

        $('#txtFarmer_nameEng').keypress(function (e) {
            var regex = new RegExp(/^[a-zA-Z\s]+$/);
            var str = String.fromCharCode(!e.charCode ? e.which : e.charCode);
            if (regex.test(str)) {
                return true;
            }
            else {
                e.preventDefault();
                return false;
            }
        });

        $('#txtsurname').keypress(function (e) {
            var regex = new RegExp(/^[a-zA-Z\s]+$/);
            var str = String.fromCharCode(!e.charCode ? e.which : e.charCode);
            if (regex.test(str)) {
                return true;
            }
            else {
                e.preventDefault();
                return false;
            }
        });
        $('#txtFHW_nameEN').keypress(function (e) {
            var regex = new RegExp(/^[a-zA-Z\s]+$/);
            var str = String.fromCharCode(!e.charCode ? e.which : e.charCode);
            if (regex.test(str)) {
                return true;
            }
            else {
                e.preventDefault();
                return false;
            }
        });
        $('#txtFHW_nameEN').keypress(function (e) {
            var regex = new RegExp(/^[a-zA-Z\s]+$/); 
            var str = String.fromCharCode(!e.charCode ? e.which : e.charCode);
            if (regex.test(str)) {
                return true;
            }
            else {
                e.preventDefault();
                return false;
            }
        });

    });

</script>
<style>
    #loader {
        position: fixed;
        left: 0px;
        top: 0px;
        width: 100%;
        height: 100%;
        z-index: 9999;
        opacity: 0.5;
        background: url('../../images/LoadingImg.gif') 50% 50% no-repeat rgb(0,0,0);
    }
</style>
<form id="farmer_profile" class="form-horizontal" data-role="validator" novalidate="novalidate">

    <div class="panel panel-default">
        <div class="panel-body" style="padding-top:6px;padding-bottom:2px">
            <div class="row" style="display:none;">
                <div class="col-sm-6">
                    <div class="form-group">
                        <label for="farmer_rowid" class="col-sm-5 control-label">Farmer Rowid </label>
                        <div class="col-sm-7">
                            <input type="text" id="farmer_rowid" name="in_farmer_rowid" class="form-control" data-toggle="tooltip" data-placement="bottom" title="">
                        </div>
                    </div>
                </div>
                <div class="col-sm-6">
                    <div class="form-group">
                        <label for="farmer_code" class="col-sm-5 control-label">Farmer Code </label>
                        <div class="col-sm-7">
                            <input type="text" id="farmer_code" class="form-control" name="in_farmer_code" data-toggle="tooltip" data-placement="bottom" title="">
                            @*prema added for fpo farmer mapping on 12Apr 2022*@
                            <input type="text" id="fpo_orgncode" class="form-control" name="in_fpo_orgncode" data-toggle="tooltip" data-placement="bottom" title="" style="display:none;">
                            <input id="in_dup_flag" type="text" name="in_dup_flag" style="display:none;" />
                        </div>
                    </div>
                </div>
                <div class="col-sm-6">
                    <div class="form-group">
                        <label for="version_no" class="col-sm-5 control-label">Farmer Version </label>
                        <div class="col-sm-7">
                            <input type="text" id="version_no" class="form-control" name="in_version_no" data-toggle="tooltip" data-placement="bottom" title="" value="1">
                        </div>
                    </div>
                </div>
            </div>
            <div class="row" id="MemFpo">


                <div class="col-sm-6">
                    <div class="form-group">
                        <label for="txtmember_idEng" class="col-sm-5 control-label required">Member ID</label>
                        <div class="col-sm-7">
                            <input type="text" id="txtmember_idEng" name="in_member_id" class="form-control" data-toggle="tooltip" data-placement="bottom" title="Member ID" maxlength="100" disabled>
                        </div>
                    </div>
                </div>
                <div class="col-sm-6">
                    <div class="form-group">
                        <label for="txtFPO_nameEng" class="col-sm-5 control-label required">FPO Name </label>
                        <div class="col-sm-7">
                            <input type="text" id="txtFPO_nameEng" name="in_fpo_name" class="form-control" data-toggle="tooltip" data-placement="bottom" title="FPO Name" maxlength="100" disabled>
                        </div>
                    </div>
                </div>

            </div>
            <div class="row">


                <div class="col-sm-6">
                    <div class="form-group">
                        <label id="lblfarmername" class="col-sm-5 control-label required">Farmer First Name </label>
                        <div class="col-sm-7">
                            <input type="text" id="txtFarmer_nameEng" name="in_farmer_name" class="form-control" data-toggle="tooltip" data-placement="bottom" title="Farmer First Name" maxlength="100">
                        </div>
                    </div>
                </div>

                <div class="col-sm-6">
                    <div class="form-group">
                        <label id="lblfarmername1" class="col-sm-5 control-label"></label>
                        <div class="col-sm-7">
                            <input type="text" id="txtFarmer_nameTn" class="form-control" name="in_farmer_ll_name" data-toggle="tooltip" data-placement="bottom" title="">

                        </div>
                    </div>
                </div>
            </div>


            <div class="row">
                <div class="col-sm-6">
                    <div class="form-group">
                        <label for="file" class=" col-sm-5 control-label">Farmer Photo </label>
                        <div class=" col-sm-7">
                            <img id="farmer_img" src="~/images/NoImage.png" class="col-sm-5 img-bordered profileImg1" alt="User Image" height="150" width="50" />
                            <input type="file" name="file" id="farmerfile" src="~/images/noimage.png" style="width: 120px;" class=" col-sm-4 control-label" accept="image/x-png, image/gif, image/jpeg" />
                            @*<button title="" data-placement="top" data-toggle="tooltip" class="btn btn-info" type="submit" data-original-title="Capture Signature"> <span class="glyphicon glyphicon-camera"></span></button>*@
                            <input type="hidden" id="txtImageHidden" name="in_photo_farmer" />
                        </div>
                    </div>
                </div>
                <div class="col-xs-6">
                    <label for="file" class=" col-sm-5 control-label">QR Code </label>

                    <div class=" col-sm-7">
                        <img id="farmer_Qrimg" src="" class="col-sm-5 img-bordered profileImg1" alt="QR Code" height="150" width="100" />
                        @*<button title="" data-placement="top" data-toggle="tooltip" class="btn btn-info" type="submit" data-original-title="Capture Signature"> <span class="glyphicon glyphicon-camera"></span></button>*@
                        <input type="hidden" id="txtImageHiddenQr" name="in_qrcode_farmer" />
                    </div>

                </div>
            </div>


            <div class="row">
                <section class="col-md-12">
                    <div id="tab_list" class="col-md-12">
                        <ul class="nav nav-tabs">
                            <li class="active">
                                <a href="#ScreenControls" role="tab" data-toggle="tab">
                                    Header Details
                                </a>
                            </li>
                            <li>
                                <a href="#Gridcolumns" id="" role="tab" data-toggle="tab">
                                    KYC Details
                                </a>
                            </li>

                            <li>
                                <a href="#Frontendvaliditions" id="" role="tab" data-toggle="tab">
                                    Bank Details
                                </a>
                            </li>

                            <li>
                                <a href="#constentvaliditions" id="consenttab" role="tab" data-toggle="tab">
                                    Consent Details
                                </a>
                            </li>

                        </ul>

                        <div class="tab-content">

                            <div class="tab-pane fade active in" id="ScreenControls">
                                <div class="panel panel-default">
                                    <div class="panel-body">

                                        <div class="row">
                                            <div class="col-sm-6">
                                                <div class="form-group">
                                                    <label id ="lblsurname" class="col-sm-5 control-label">Sur Name</label>
                                                    <div class="col-sm-7">
                                                        <input type="text" id="txtsurname" name="in_sur_name" class="form-control" data-toggle="tooltip" data-placement="bottom" title="Sur Name" maxlength="50">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-sm-6">
                                                <div class="form-group">
                                                    <label id ="lblsurname1" class="col-sm-5 control-label"></label>
                                                    <div class="col-sm-7">
                                                        <input type="text" id="txtsurname_II" name="in_sur_ll_name" class="form-control" data-toggle="tooltip" data-placement="bottom" title="">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-sm-6">
                                                <div class="form-group">
                                                    <label id="lblfhwname" class="col-sm-5 control-label required">Father / Husband / Wife's Name </label>
                                                    <div class="col-sm-7">
                                                        <input type="text" id="txtFHW_nameEN" name="in_fhw_name" class="form-control" data-toggle="tooltip" data-placement="bottom" title="Father / Husband / Wife's Name" maxlength="50">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-sm-6">
                                                <div class="form-group">
                                                    <label id="lblfhwname1" class="col-sm-5 control-label"></label>
                                                    <div class="col-sm-7">
                                                        <input type="text" id="txtFHW_nameIN" name="in_fhw_ll_name" class="form-control" data-toggle="tooltip" data-placement="bottom" title="">

                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-sm-6">
                                                <div class="form-group">
                                                    <label id="lblDateOfBirth" class="col-sm-5 control-label required">Date Of Birth </label>
                                                    <div class="col-sm-7">
                                                        <input class="cusDate" data-role='' id="farmer_dob" data-checkdate-msg="Enter Date of Birth" name="in_farmer_dob" style="width:100%" onkeypress="return date_validate(event)" />
                                                        <span data-for='valid' class='k-invalid-msg'></span>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="col-sm-6">
                                                <div class="form-group">
                                                    <label id="lblDateOfBirth1" class="col-sm-5 control-label"></label>
                                                    <div class="col-sm-7">
                                                        <input type="text" id="farmer_dob2" name="in_farmer_dob" class="form-control" data-toggle="tooltip" data-placement="bottom" disabled>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-sm-6">
                                                <div class="form-group">
                                                    <label id="lblgender" class="col-sm-5 control-label required">Gender</label>
                                                    <div class="col-sm-7">
                                                        <input id="combo_gender" class="form-control" name="in_gender_flag" data-toggle="tooltip" style="width:100%" data-placement="bottom" data-role="filtercombo">
                                                    </div>
                                                </div>

                                            </div>

                                            <div class="col-sm-6">
                                                <div class="form-group">
                                                    <label id="lblgender1" class="col-sm-5 control-label"></label>
                                                    <div class="col-sm-7">
                                                        <input id="combo_genderIN" class="form-control" name="in_gender_flag1" style="width:100%" data-toggle="tooltip" data-placement="bottom" data-role="filtercombo" disabled>

                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-sm-6">
                                                <div class="form-group">
                                                    <label id="lblRegisteredMobileNo" class="col-sm-5 control-label required">Registered Mobile No</label>
                                                    <div class="col-sm-7">
                                                        <input type="text" id="txtMobile_no" onkeypress="return isNumberKey(event)" name="in_reg_mobile_no" maxlength="10" class="form-control" data-toggle="tooltip" data-placement="bottom">
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="col-sm-6">
                                                <div class="form-group">
                                                    <label id="lblRegisteredMobileNo1" class="col-sm-5 control-label"></label>
                                                    <div class="col-sm-7">
                                                        <input type="text" id="txtMobile_no1" onkeypress="return isNumberKey(event)" name="in_reg_mobile_notn" maxlength="10" class="form-control" data-toggle="tooltip" data-placement="bottom" disabled>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        @if (Instance == "od")
                                        {
                                            <div class="row">
                                                <div class="col-sm-6">
                                                    <div class="form-group">
                                                        <label id="lblPermanentAddress1" class="col-sm-5 control-label required">Permanent Address 1 </label>
                                                        <div class="col-sm-7">
                                                            <input type="text" id="txtaddressEn" name="in_farmer_addr1" class="form-control" data-toggle="tooltip" data-placement="bottom" title="Permanent Address 1" maxlength="256">
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-sm-6">
                                                    <div class="form-group">
                                                        <label id="lblPermanentAddress11" class="col-sm-5 control-label"></label>
                                                        <div class="col-sm-7">
                                                            <input type="text" id="txtaddressIn" name="in_farmer_ll_addr1" class="form-control" data-toggle="tooltip" data-placement="bottom" title="">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        }
                                        @if (Instance == "up")
                                        {
                                            <div class="row">
                                                <div class="col-sm-6">
                                                    <div class="form-group">
                                                        <label id="lblhouseno" class="col-sm-5 control-label">House No. </label>
                                                        <div class="col-sm-7">
                                                            <input type="text" id="txtaddressEn" name="in_farmer_addr1" class="form-control" data-toggle="tooltip" data-placement="bottom" title="House No" maxlength="256">
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-sm-6">
                                                    <div class="form-group">
                                                        <label id="lblhouseno1" class="col-sm-5 control-label">माकन नंबर </label>
                                                        <div class="col-sm-7">
                                                            <input type="text" id="txtaddressIn" name="in_farmer_ll_addr1" class="form-control" data-toggle="tooltip" data-placement="bottom" title="">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        }
                                        <div class="row">
                                            <div class="col-sm-6">
                                                <div class="form-group">
                                                    <label id="lblCountry" class="col-sm-5 control-label required">Country</label>
                                                    <div class="col-sm-7">
                                                        <input id="combo_country" name="in_farmer_country" style="width:100%" class="form-control" data-toggle="tooltip" data-placement="bottom" maxlength="50" data-role="filtercombo" readonly disabled>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="col-sm-6">
                                                <div class="form-group">
                                                    <label id="lblCountry1" class="col-sm-5 control-label">देश </label>
                                                    <div class="col-sm-7">
                                                        <input id="combo_country1" name="in_farmer_country1" style="width:100%" class="form-control" data-toggle="tooltip" data-placement="bottom" maxlength="50" data-role="filtercombo" disabled>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-sm-6">
                                                <div class="form-group">
                                                    <label id="lblState" class="col-sm-5 control-label required">State</label>
                                                    <div class="col-sm-7">
                                                        <input id="combo_state" class="form-control" name="in_farmer_state" style="width:100%" data-toggle="tooltip" data-placement="bottom" data-role="filtercombo" readonly disabled>
                                                        <input type="hidden" id="combo_mst_state" class="form-control" style="width:100%" data-toggle="tooltip" data-placement="bottom" data-role="filtercombo">
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="col-sm-6">
                                                <div class="form-group">
                                                    <label id="lblState1" class="col-sm-5 control-label"></label>
                                                    <div class="col-sm-7">
                                                        <input id="combo_state1" class="form-control" name="in_farmer_state_ll_desc" style="width:100%" data-toggle="tooltip" data-placement="bottom" data-role="filtercombo" readonly>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-sm-6">
                                                <div class="form-group">
                                                    <label id="lblvillage" class="col-sm-5 control-label required">Village</label>
                                                    @*<input id="combo_village" class="form-control" name="farmer_village" style="width:100%" data-toggle="tooltip" data-placement="bottom" data-role="filtercombo">*@
                                                    <div class=" col-sm-6">
                                                        <input id="combo_village_1" class="form-control" style="width:100%" data-toggle="tooltip" readonly>
                                                        <input type="hidden" id="combo_mst_village" class="form-control" name="in_farmer_village" style="width:100%" data-toggle="tooltip" readonly>
                                                    </div>
                                                    <div id="pay_help2">
                                                        <a class="HelpWindow fa fa-search fa-lg" role="button" id="pay_help21" data-toggle="modal" href="/HelpFilter/HelpFilter" hdrtitle="Village" searchid="S120" data-target="#HelpModal" onclick=transfer(this,"form","","form_control"); title="Search" style="font-size: 19px;"></a>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-sm-6">
                                                <div class="form-group">
                                                    <label id="lblvillage1" class="col-sm-5 control-label"></label>
                                                    <div class="col-sm-7">
                                                        <input id="combo_village1_1" class="form-control" style="width:100%" data-toggle="tooltip" data-placement="bottom" data-role="filtercombo" readonly>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row" style="display:none">
                                            <div class="col-sm-6">
                                                <div class="form-group">
                                                    <label id="lblhamlet" class="col-sm-5 control-label required">Hamlet</label>
                                                    <div class="col-sm-7">
                                                        @*<input id="combo_grampanchayat" class="form-control" name="farmer_panchayat" style="width:100%" data-toggle="tooltip" data-placement="bottom" data-role="filtercombo" disabled>*@
                                                        <input id="txtaddress2En" class="form-control" data-role="filtercombo" style="width:100%" data-toggle="tooltip" readonly>
                                                        <input type="hidden" id="combo_mst_hamlet" class="form-control" name="in_farmer_addr2" style="width:100%" data-toggle="tooltip">
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="col-sm-6">
                                                <div class="form-group">
                                                    <label  id="lblhamlet1" class="col-sm-5 control-label">​</label>
                                                    <div class="col-sm-7">
                                                        <input id="txtaddress2In" style="width:100%" class="form-control" name="in_farmer_ll_addr2" data-toggle="tooltip" data-placement="bottom" data-role="filtercombo" readonly>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-sm-6">
                                                <div class="form-group">
                                                    <label id="lblgrampanchayat" class="col-sm-5 control-label required">Gram Panchayat</label>
                                                    <div class="col-sm-7">
                                                        @*<input id="combo_grampanchayat" class="form-control" name="farmer_panchayat" style="width:100%" data-toggle="tooltip" data-placement="bottom" data-role="filtercombo" disabled>*@
                                                        <input id="combo_grampanchayat_1" class="form-control" data-role="filtercombo" style="width:100%" data-toggle="tooltip" readonly>
                                                        <input type="hidden" id="combo_mst_grampanchayat" class="form-control" name="in_farmer_panchayat" data-role="filtercombo" style="width:100%" data-toggle="tooltip" readonly>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="col-sm-6">
                                                <div class="form-group">
                                                    <label id="lblgrampanchayat1" class="col-sm-5 control-label">ग्राम पंचायत ​</label>
                                                    <div class="col-sm-7">
                                                        <input id="combo_grampanchayat2_1" style="width:100%" class="form-control" data-toggle="tooltip" data-placement="bottom" data-role="filtercombo" readonly>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-sm-6">
                                                <div class="form-group">
                                                    <label id="lbltaluk" class="col-sm-5 control-label  required">Taluk</label>
                                                    <div class="col-sm-7">
                                                        @*<input id="combo_taluk" class="form-control" name="farmer_taluk" style="width:100%" data-toggle="tooltip" data-placement="bottom" data-role="filtercombo" disabled>*@
                                                        <input id="combo_taluk_1" class="form-control" data-role="filtercombo" style="width:100%" data-toggle="tooltip" readonly>
                                                        <input type="hidden" id="combo_mst_taluk" class="form-control" name="in_farmer_taluk" data-role="filtercombo" style="width:100%" data-toggle="tooltip" readonly>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="col-sm-6">
                                                <div class="form-group">
                                                    <label id="lbltaluk1" class="col-sm-5 control-label">तालुका</label>
                                                    <div class="col-sm-7">
                                                        <input type="text" id="combo_taluk1_1" class="form-control" style="width:100%" data-toggle="tooltip" data-placement="bottom" readonly>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-sm-6">
                                                <div class="form-group">
                                                    <label id="lbldistrict" class="col-sm-5 control-label  required">District</label>
                                                    <div class="col-sm-7">
                                                        @*  <input id="district" name="farmer_dist" class="form-control" data-toggle="tooltip" data-placement="bottom">*@
                                                        @*<input id="combo_district" class="form-control" name="farmer_dist" style="width:100%" data-toggle="tooltip" data-placement="bottom" data-role="filtercombo" disabled>*@
                                                        <input id="combo_district_1" class="form-control" data-role="filtercombo" style="width:100%" data-toggle="tooltip" readonly>
                                                        <input type="hidden" id="combo_mst_district" class="form-control" name="in_farmer_dist" data-role="filtercombo" style="width:100%" data-toggle="tooltip" readonly>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="col-sm-6">
                                                <div class="form-group">
                                                    <label id="lbldistrict1" class="col-sm-5 control-label">जिला </label>
                                                    <div class="col-sm-7">
                                                        <input id="combo_district1_1" class="form-control" style="width:100%" data-toggle="tooltip" data-placement="bottom" data-role="filtercombo" readonly>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-sm-6">
                                                <div class="form-group">
                                                    <label id="lblpincode" class="col-sm-5 control-label required">Pincode</label>
                                                    <div class="col-sm-7">
                                                        <input id="pincode" onkeypress="return isNumberKey(event)" name="in_farmer_pincode" maxlength="6" type="text" class="form-control" data-toggle="tooltip" data-placement="bottom">
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="col-sm-6">
                                                <div class="form-group">
                                                    <label id="lblpincode1" class="col-sm-5 control-label">​पिन कोड</label>
                                                    <div class="col-sm-7">
                                                        <input type="text" id="pincode2" onkeypress="return isNumberKey(event)" name="in_farmer_pincodetn" class="form-control" data-toggle="tooltip" data-placement="bottom" maxlength="6" readonly disabled>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>


                                        <div class="row">
                                            @*<div class="col-sm-6">
                                                    <div class="form-group" style="display:none;">
                                                        <label for="txtreg_note" class="col-sm-5 control-label">Reg. Note</label>
                                                        <div class="col-sm-7">
                                                            <input id="txtreg_note" name="reg_note" type="text" class="form-control" data-toggle="tooltip" data-placement="bottom">
                                                        </div>
                                                    </div>
                                                </div>*@

                                            <div class="col-sm-6">
                                                <div class="form-group" style="display:none;">
                                                    <label for="status_code" class="col-sm-5 control-label">Status</label>
                                                    <div class="col-sm-7">
                                                        <input type="text" id="status_code" name="in_status_code" class="form-control" data-toggle="tooltip" data-placement="bottom">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>


                                        <div class="row">
                                            <div class="col-sm-6">
                                                <div class="form-group" style="display:none;">
                                                    <label for="combo_marital" class="col-sm-5 control-label">Marital</label>
                                                    <div class="col-sm-7">
                                                        <input id="combo_marital" class="form-control" name="in_marital_status" style="width:100%" data-toggle="tooltip" data-placement="bottom" data-role="filtercombo">
                                                        @*<input type="text" id="marital_status" name="marital_status" class="form-control" data-toggle="tooltip" data-placement="bottom" data-role="filtercombo">*@
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="col-sm-6">
                                                <div class="form-group" style="display:none;">
                                                    <label for="txtrow_timestamp" class="col-sm-5 control-label">Time Stamp</label>
                                                    <div class="col-sm-7">
                                                        <input type="text" id="txtrow_timestamp" name="in_row_timestamp" class="form-control" data-toggle="tooltip" data-placement="bottom">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-sm-6">
                                                <div class="form-group" style="display:none;">
                                                    <label for="txtMode" class="col-sm-5 control-label">Mode</label>
                                                    <div class="col-sm-7">
                                                        <input id="txtMode" name="in_mode_flag" type="text" class="form-control" data-toggle="tooltip" data-placement="bottom" value="I">
                                                    </div>
                                                </div>
                                                <div class="form-group" style="display:none;">
                                                    <label for="txtMode" class="col-sm-5 control-label">Mode</label>
                                                    <div class="col-sm-7">
                                                        <input id="instance" name="Instance" type="text" class="form-control" data-toggle="tooltip" data-placement="bottom" value="@Instance">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>


                            <div class="tab-pane fade" id="Gridcolumns">
                                <div class="panel panel-default">
                                    <div class="panel-body">
                                        <div id="Kycgrid"></div>
                                    </div>
                                </div>
                            </div>

                            <div class="tab-pane fade" id="Frontendvaliditions">
                                <div class="panel panel-default">
                                    <div class="panel-body">
                                        <div id="Bankgrid"></div>
                                    </div>
                                </div>
                            </div>

                            <div class="tab-pane fade" id="constentvaliditions">
                                <div class="panel panel-default">
                                    <div class="panel-body">
                                        <div id="Consentgrid"></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div>
                            <label class="col-sm-5 control-label required">Comments</label>
                            <textarea id="TextArea1" rows="4" cols="20" name="in_reg_note" style="width:100%" class="form-control" readonly></textarea>
                        </div>

                    </div>
                </section>
            </div>
        </div>
    </div>
    <input type="hidden" id="hdduparray" name="hdduparray" />
    <div id="loader"></div>
</form>
<div id="dialogconsent">
    <form1 id="farmer_consent" class="form-horizontal" data-role="validator" novalidate="novalidate">
        <div class="col-sm-12">
            <div class="row">
                <div class="col-sm-3">
                    <div class=" form-group">
                        <label for="txtFarmer_namecon" class="col-sm-4 control-label required">Farmer Name</label>
                        <input type="text" id="txtFarmer_namecon" disabled name="">
                    </div>
                </div>
                <div class="col-sm-5">
                    <div class=" form-group">
                        <label for="txtfarmer_code" class="col-sm-3 control-label required">Farmer Code</label>
                        <input type="text" id="txtfarmer_code" disabled name="In_consent_owner_id" style="width:55%">
                    </div>
                </div>
                <div class="col-sm-3">
                    <div class=" form-group">
                        <label for="txtMobile_nocon" class="col-sm-4 control-label required">Mobile No</label>
                        <input type="text" id="txtMobile_nocon" disabled name="In_mobile_no">
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-sm-3">
                    <div class=" form-group">
                        <label for="combo_lang" class="col-sm-4 control-label required">Lang Code</label>
                        <input id="combo_lang" class="form-control" name="In_lang_code" data-toggle="tooltip" style="width:52%" onchange="Uploadconsentview()" data-placement="bottom" data-role="filtercombo">
                    </div>
                </div>
                <div class="col-sm-5">
                    <div class=" form-group">
                        <label for="combo_fpo" class="col-sm-3 control-label required">Fpo</label>
                        <input id="combo_fpo" class="form-control" name="In_consent_to" data-toggle="tooltip" style="width:55%" onchange="Uploadconsentview()" data-placement="bottom" data-role="filtercombo">
                        <input id="txtCaptcha" type="hidden" name="In_otp" />
                        <input id="template_id" type="hidden" name="In_template_id" />
                        <input id="In_mode_flag" type="hidden" name="In_mode_flag" value="I" />
                        <input id="In_status_code" type="hidden" name="In_status_code" value="A">
                        <input id="in_attach_consent" type="hidden" name="in_attach_consent" />
                    </div>
                </div>
                <div class="col-sm-3">
                    <div class="form-group" style="margin-left:20px">
                        <input type="radio" id="rd_otp" name="ag" checked value="otp" />OTP
                        <input type="radio" id="rd_attach" style="margin-left:10px" name="ag" value="ATTACH" />Attachment
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-8">

                    <textarea id="TextAreaconsent" rows="4" cols="20" name="in_reg_note" style="width:1125px;height:175px" class="form-control" readonly></textarea>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-8">
                    <input style="padding-right:20px" type="checkbox" id="agreetm" onclick="agreetermsandcondition()"> I have read the consent and am agreeable to the same
                </div>
                <div class="col-sm-8">
                    <input style="padding-right:20px" type="checkbox" id="disagreetm" onclick="disagreetermsandcondition()"> I have read the consent and am disagree to the same
                </div>
            </div>
            <div class="row">
                <div class="col-sm-4">
                </div>
                <div class="col-sm-4" style="padding-left: 65px;">
                    <button id="btn_disagree" class="btn btn-info" onclick="agreesave()"> Agree </button>
                    <button id="btn_agree" class="btn btn-info" onclick="agreesave()"> DisAgree </button>
                    <button id="btn_cancel" class="btn btn-info" onclick="consentclose()"> Cancel </button>
                    <button type="button" id="upoloadview" class="btn btn-info" name="View" onclick="Uploadviewconsent()">View</button>
                </div>
                <div class="col-sm-4">
                </div>
            </div>
            <div id="dialogconsentotp">
                <div class="row">
                    <div class=" form-group">
                        <label for="otp_no" class="col-sm-2 control-label required">Otp</label>
                        <input type="text" id="otp_no" name="in_otp_no">
                    </div>
                </div>
                <div class="row" style="padding-left:90px" id="btnsub">
                    <button id="btn_submit" class="btn btn-info" onclick="Validotp()"> Submit </button>
                    <button id="btn_cancel1" class="btn btn-info" onclick="consentcloseotp()"> Cancel </button>
                </div>
            </div>
            <div id="dialogconsentattach">
                <div class="row">
                    <div class="form-group">
                        <label for="file" class=" col-sm-2 control-label">Attachment </label>
                        <img id="consent_img" src="~/images/Bill Image.jpg" class="col-sm-5 img-bordered profileImg" alt="User Image" height="250" width="100" />
                        <input type="file" name="file" id="farmerconsent" src="~/images/noimage.png" style="width: 184px;" class=" col-sm-4 control-label" accept="image/x-png, image/gif, image/jpeg" />
                        <input type="hidden" id="txtfarmerconsent" name="in_consent_farmer" />
                    </div>
                </div>
                <div class="row">
                    <div class="form-group">
                        <label for="" class=" col-sm-2 control-label"></label>
                        <input style="padding-right:20px" type="checkbox" id="attachverified" onclick="attachverified()">Is Verified
                    </div>
                </div>
                <div class="row" style="padding-left:250px;padding-top:10px">
                    <button id="btn_submit1" class="btn btn-info" onclick="consentattach()"> Submit </button>
                    <button id="btn_cancel1" class="btn btn-info" onclick="consentcloseattach()"> Cancel </button>
                </div>

            </div>
        </div>
    </form1>
</div>

<div id="dialogFileuploadView">
    <img id="farmer_kyc_img" src="~/images/Bill Image.jpg" class="col-sm-5 img-bordered profileImg" alt="User Image" height="350" width="200" style="width:98%" />
</div>
<div id="dialog" style="display:none;">
    <p> It is a Potential Duplicate, Do you want to Save it anyway?</p>
    <div class="row">
        <div class="col-sm-6">
            <button type="button" id="btnAccept" style="margin-left:18px;margin-top:7px" class="btn btn-info" onclick="SaveDuplicate()"><span class="glyphicon glyphicon-ok"></span> OK</button>
            <button type="button" id="btnCancel" style="margin-left:18px;margin-top:7px" class="btn btn-info" onclick="CloseDuplicate()"><span class="glyphicon glyphicon-ok"></span> CANCEL</button>
        </div>
    </div>
</div>
<script>
    function SaveDuplicate() {

        var Context = $("#hdduparray").val();
        PotentialDuplicate_Save(Context);
        $("#dialog").data("kendoWindow").close();
        $("#in_dup_flag").val("N");
        $("#loader").fadeOut(1000);
    }

    function CloseDuplicate() {
        $("#dialog").data("kendoWindow").close();
        $("#in_dup_flag").val("N");
        $("#loader").fadeOut(1000);
    }
</script>
<script>

    $(document).on('click', '#reviewEd', function (e) {
        $('#divEdit #reviewEd').prop('disabled', true);

    });
    $(document).on('click', '#btnApprove', function (e) {
        $('#divEdit #btnApprove').prop('disabled', true);
        $('#divEdit #btnReject').prop('disabled', true);
    });
    $(document).on('click', '#btnReject', function (e) {


        var txtval = $('#TextArea1').val().toString();

        if (txtval != "" && txtval != null) {

            $('#divEdit #btnApprove').prop('disabled', true);
            $('#divEdit #btnReject').prop('disabled', true);
        }
        else {

            //Code Introduced by venkat start 28-06-2020 [checker login comments field enable]
            $('#TextArea1').attr('readonly', false)
            //Code Introduced by venkat End
        }
    });
    $(document).ready(function () {

        $("#loader").fadeOut(0);
        var appInstance = $('#instance').val();

        Form_validate_Name = $('form.form-horizontal').attr('id');
        var container = $("#farmer_profile");
        kendo.init(container);
        container.kendoValidator({
        });
        $("#in_dup_flag").val("N");
        $('#divCreate').hide();
        //$("#bottom_menus").hide();
        $('#divEdit').show();
        $('#divEdit #deactivate').hide();
        $('#divEdit #reviewEd').attr('disabled', true);
        $('#divCreate #review').prop('disabled', true);

        $(".file_attach").attr("hdrtitle", "Farmer Registration");
        $(".notes").attr("hdrtitle", "Farmer Registration");
        $("#lblForm_menuid").text("FARMREG");
        langcodeloc("FARMREG");
        Screen_Id = "FARMREG";
        permission = sec_Permission(Screen_Id);
        $("#dialogFileuploadView").hide();
        $("#dialogconsent").hide();
        $("#dialogconsentotp").hide();
        $("#dialogconsentattach").hide();
        $("#consenttab").hide();
        $("#upoloadview").hide();

        //load_master_code();
        setlocalStorage("status", "Active");
        setlocalStorage('status_code', "A");
        Kycgrid([]);
        Bankgrid([]);
        gridConsent([]);
        // master_FDR();
        //kendodate_format1();
        $("#btn_agree").prop("disabled", true);
        $("#btn_submit1").prop("disabled", true);
        var map_in = "";
        $("#combo_gender").empty();
        map_in = grid_comboScreen_mastercodes("QCD_GENDER");

        filter_combobox("combo_gender", map_in);

        var gtmap_in = "";
        $("#combo_genderIN").empty();
        gtmap_in = grid_comboScreen_hindi("QCD_GENDER");
        filter_combobox("combo_genderIN", gtmap_in);

        var map_in = "";
        $("#combo_state").empty();

        map_in = grid_comboScreen_mastercodes("QCD_UN_STATE");
        filter_combobox("combo_state", map_in);
        // to select india by default
        var cmap_insel = $("#combo_state").data("kendoComboBox");
        cmap_insel.value(getlocalStorage("fpo_state_code"));
        var smap_in = "";

        $("#combo_state1").empty();
        smap_in = grid_comboScreen_hindi("QCD_UN_STATE");
        filter_combobox("combo_state1", smap_in);
        var cmap_insel1 = $("#combo_state1").data("kendoComboBox");
        cmap_insel1.value(getlocalStorage("fpo_state_code"));
        $("#combo_mst_state").val($("#combo_state1").data("kendoComboBox").text());

        var cmap_in = "";
        $("#combo_country").empty();
        cmap_in = grid_comboScreen_mastercodes("QCD_COUNTRY");
        filter_combobox("combo_country", cmap_in);

        // to select india by default
        var cmap_insel = $("#combo_country").data("kendoComboBox");
        cmap_insel.value("QCD_UN_IND");

        var ctmap_in = "";
        $("#combo_country1").empty();
        ctmap_in = grid_comboScreen_hindi("QCD_COUNTRY");
        filter_combobox("combo_country1", ctmap_in);

        // to select india by default
        $("#combo_country1").data("kendoComboBox").value("QCD_UN_IND");
        var ctmap_insel = $("#combo_country1").data("kendoComboBox");
        ctmap_insel.value("QCD_UN_IND");

        var map_in = "";
        $("#combo_marital").empty();
        map_in = grid_comboScreen_mastercodes("QCD_MARITAL");
        filter_combobox("combo_marital", map_in);

        var map_in = "";
        $("#combo_lang").empty();
        map_in = [{ code: "en_US", desc: "English" }, { code: "hi_IN", desc: "Hindi" }, { code: "ta_IN", desc: "Tamil" }];
        filter_combobox("combo_lang", map_in);
        var cmap_inselcon = $("#combo_lang").data("kendoComboBox");
        cmap_inselcon.value("en_US");

        var map_in = "";
        $("#combo_fpo").empty();
        map_in = grid_comboScreen_mastercodes("FPO");
        filter_combobox("combo_fpo", map_in);

        //DROP DOWN LIST

        if (getlocalStorage('btn_clk_val') == "Create") {
            //modevalue.text="New Mode"
            $("#farmer_rowid").val("0");
            $("#farmer_code").val("0");
            $('#divCreate #review').hide();
            $('#divEdit #reviewEd').hide();
            $("#MemFpo").hide();
            $("#bottom_menus").hide();
            $("#status_code").val("N");
            $("#DocStat").val("New");
            //load_master_code();
        }
        else if (getlocalStorage('btn_clk_val') == "Edit") {
            debugger;
            $('#divEdit #reviewEd').removeAttr('disabled');
            $('#divEdit').show();
            $('#divEdit #reviewEd').hide();
            if (getlocalStorage("ls_pageList") != undefined) {
                $("#bottom_menus").show();
                $("#pay_help21").show();
                $("#consenttab").show();
                $("#bottom_menus li:nth-child(1)").hide();
                var data = getlocalStorage("ls_pageList");
                var formval = form_Serialize("farmer_profile");
                var obj_val = JSON.parse(formval);
                obj_val.in_farmer_rowid = data.out_farmer_rowid;
                obj_val.in_farmer_code = data.out_farmer_code;
                obj_val.in_version_no = data.out_version_no;
                $("#txtcommon_id").val(data.out_farmer_code);
                $("#txtfarmer_code").val(data.out_farmer_code);
                setlocalStorage('doc_no', obj_val.in_farmer_code);
                setlocalStorage('doc_row_id', obj_val.in_farmer_rowid);
                var data = getlocalStorage("ls_pageList");
                // var data = {};
                data.context = getContext();
                data.context.Header = obj_val;
                //  var Context = data;

                var Context = data.context;
                $.ajax({
                    type: "POST",
                    data: JSON.stringify({ userId: Context.userId, orgnId: Context.orgnId, locnId: Context.locnId, localeId: Context.localeId, Header: Context.Header }),
                    url: "/ListViewMaker/GetFarmer",
                    dataType: "json",
                    contentType: 'application/json; charset=utf-8',
                    success: function (response) {

                        var res = JSON.parse(response);
                        if (res.context != null) {
                            Qrcode_Gen(res.context.header.in_farmer_code);
                            generate_farmer_registration_header(res.context.header);
                            if (res.context.kyc != null) {

                                generate_farmer_registration_Kyc(res.context.kyc);
                            } else { generate_farmer_registration_Kyc([]); }
                            if (res.context.bank != null) {
                                generate_farmer_registration_Bank(res.context.bank);
                            } else { generate_farmer_registration_Bank([]); }
                            if (res.context.consent != null) {
                                generate_farmer_registration_consent(res.context.consent);
                                consentplusbtton();
                            } else { generate_farmer_registration_consent([]); }
                        }
                        else {
                            console.log("Issue where Dropped");
                        }
                    },
                    error: function (er) {
                        console.log(er);
                    }

                });

                $("#txtFarmer_nameEng").attr("readonly", true);
                $("#txtFarmer_nameTn").attr("readonly", true);
                $("#txtMode").val("U");
            }
        }

        else if (getlocalStorage('btn_clk_val') == "View") {
            $('#divEdit #reviewEd').removeAttr('disabled');
            $('#divEdit').hide();
            $('#divEdit #reviewEd').hide();
            $("#consenttab").show();
            if (getlocalStorage("ls_pageList") != undefined) {
                $("#bottom_menus").show();
                $("#pay_help21").show();

                $("#bottom_menus li:nth-child(1)").hide();
                var data = getlocalStorage("ls_pageList");
                var formval = form_Serialize("farmer_profile");
                var obj_val = JSON.parse(formval);
                obj_val.in_farmer_rowid = data.out_farmer_rowid;
                obj_val.in_farmer_code = data.out_farmer_code;
                obj_val.in_version_no = data.out_version_no;
                $("#txtcommon_id").val(data.out_farmer_code);
                $("#txtfarmer_code").val(data.out_farmer_code);
                setlocalStorage('doc_no', obj_val.in_farmer_code);
                setlocalStorage('doc_row_id', obj_val.in_farmer_rowid);
                var data = getlocalStorage("ls_pageList");
                // var data = {};
                data.context = getContext();
                data.context.Header = obj_val;
                //  var Context = data;

                var Context = data.context;
                $.ajax({
                    type: "POST",
                    data: JSON.stringify({ userId: Context.userId, orgnId: Context.orgnId, locnId: Context.locnId, localeId: Context.localeId, Header: Context.Header }),
                    url: "/ListViewMaker/GetFarmer",
                    dataType: "json",
                    contentType: 'application/json; charset=utf-8',
                    success: function (response) {

                        var res = JSON.parse(response);
                        if (res.context != null) {
                            /*  Prema added for fpo based abd ri user base loading*/
                            var role = getlocalStorage("orgn_level")
                            if (role == "ORG_FO") {
                                debugger;
                                $("#RIform").show();
                                $("#FPOform").show();
                                filter_combobox("cmb_RIBelongform", getlocalStorage("rilist"));
                                filter_combobox("cmb_FPOBelongform", getlocalStorage("fpolist"));
                                var cmb_riform3 = $("#cmb_RIBelongform").data("kendoComboBox");
                                cmb_riform3.value(getlocalStorage("org_id"));
                                $("#cmb_RIBelongform").data("kendoComboBox").enable(false);
                                $("#cmb_FPOBelongform").data("kendoComboBox").enable(false);
                                var cmap_inselform = $("#cmb_FPOBelongform").data("kendoComboBox");
                                cmap_inselform.value(getlocalStorage("org"));

                            }
                            if (role == "ORG_PF") {
                                debugger;
                                $("#RIform").show();
                                $("#FPOform").show();
                                filter_combobox("cmb_RIBelongform", getlocalStorage("rilist"));
                                filter_combobox("cmb_FPOBelongform", getlocalStorage("fpolist"));
                                $("#cmb_RIBelongform").data("kendoComboBox").value("UPPRO");
                                $("#cmb_FPOBelongform").data("kendoComboBox").value("");
                                $("#cmb_RIBelongform").data("kendoComboBox").enable(false);
                                $("#cmb_FPOBelongform").data("kendoComboBox").enable(false);

                            }
                            if (role == "ORG_FPO") {
                                debugger;
                                $("#RIform").show();
                                $("#FPOform").show();
                                filter_combobox("cmb_RIBelongform", getlocalStorage("rilist"));
                                filter_combobox("cmb_FPOBelongform", getlocalStorage("fpolist"));
                                var cmb_riform3 = $("#cmb_RIBelongform").data("kendoComboBox");
                                cmb_riform3.value(getlocalStorage("parent_code"));
                                $("#cmb_RIBelongform").data("kendoComboBox").enable(false);
                                $("#cmb_FPOBelongform").data("kendoComboBox").enable(false);
                                var cmap_inselform = $("#cmb_FPOBelongform").data("kendoComboBox");
                                // cmap_inselform.value(getlocalStorage("org"));
                                cmap_inselform.value(getlocalStorage("org_code"));
                            }
                            Qrcode_Gen(res.context.header.in_farmer_code);
                            generate_farmer_registration_header(res.context.header);
                            if (res.context.kyc != null) {

                                generate_farmer_registration_Kyc(res.context.kyc);
                            } else { generate_farmer_registration_Kyc([]); }
                            if (res.context.bank != null) {
                                generate_farmer_registration_Bank(res.context.bank);
                            } else { generate_farmer_registration_Bank([]); }
                            if (res.context.consent != null) {
                                generate_farmer_registration_consent(res.context.consent);
                                consentplusbtton();
                            } else { generate_farmer_registration_consent([]); }
                        }
                        else {
                            console.log("Issue where Dropped");
                        }
                    },
                    error: function (er) {
                        console.log(er);
                    }

                });

                $("#txtFarmer_nameEng").attr("readonly", true);
                $("#txtFarmer_nameTn").attr("readonly", true);
                $("#txtMode").val("U");
            }
        }
        $('#pincode').keyup(function (e) {
            $('#pincode2').val($('#pincode').val());
        });
        $('#txtMobile_no').keyup(function (e) {

            $('#txtMobile_no1').val($('#txtMobile_no').val());
        });
        //$("#combo_grampanchayat").data("kendoComboBox").enable(false);
        //$("#combo_taluk").data("kendoComboBox").enable(false);
        //$("#combo_district").data("kendoComboBox").enable(false);
        field_enable();
        //allow to paste only numerics
        $('#txtMobile_no').on('paste', function (event) {
            if (event.originalEvent.clipboardData.getData('Text').match(/[^\d]/)) {
                event.preventDefault();
            }
        });
    });

    function cleartextbox() {

        $('#combo_village_1').val('');
        $('#combo_grampanchayat_1').val('');
        $('#combo_taluk_1').val('');
        $('#combo_district_1').val('');
        $('#combo_village1_1').val('');
        $('#combo_grampanchayat2_1').val('');
        $('#combo_taluk1_1').val('');
        $('#combo_district1_1').val('');
    }

    function field_enable() {

        try {
            if (permission.auth == true) {
                $('#pay_help21').hide();
                $("#farmer_profile :input").attr("readonly", "");
                $("#combo_grampanchayat").data("kendoComboBox").enable(false);
                $("#combo_taluk").data("kendoComboBox").enable(false);
                $("#combo_district").data("kendoComboBox").enable(false);
                $("#combo_country").data("kendoComboBox").enable(false);
                $("#combo_village").data("kendoComboBox").enable(false);
                $("#combo_state").data("kendoComboBox").enable(false);
                $("#combo_gender").data("kendoComboBox").enable(false);
                $("combo_village_1").attr("readonly", true)
                $("#TextArea1").removeAttr("readonly");
                $("#farmerfile").removeAttr("readonly");
                $("#farmerfile").prop("disabled", true);
            }
        }
        catch (err) {
            javascript_log4j_root(arguments.callee.name, err);
        }
    }

    click_act_name = "ListViewMakerList";
    click_ctrl_name = "ListViewMaker";
    form_list_url = '../' + click_ctrl_name + '/' + click_act_name;

</script>

<script>
    // code created by thianes  13.08.2021 for ( Farmer DOB value is not currentdate ) start
    var todayD = new Date();
    var dd = todayD.getDate() - 1;
    var mm = todayD.getMonth() + 1; //January is 0 so need to add 1 to make it 1!
    var yyyy = todayD.getFullYear();

    if (dd == 0) {
        if (mm == 2 || mm == 4 || mm == 6 || mm == 8 || mm == 9 || mm == 11) {
            dd = 31;
            mm = mm - 1;
        }
        else if (mm == 3 && ((yyyy % 4) == 0)) {
            dd = 29;
            mm = mm - 1;
        }
        else if (mm == 3 && ((yyyy % 4) != 0)) {
            dd = 28;
            mm = mm - 1;
        }
        else {
            dd = 30;
            mm = mm - 1;
        }
    }
    todayD = [mm, dd, yyyy].join("-");
    var todaydt = [dd, mm, yyyy].join("/");
    $(document).ready(function () {
        $("#farmer_dob").kendoDatePicker({
            format: "dd/MM/yyyy",
            max: new Date(todayD),
            //  parseFormats: ["dd/MM/yyyy"]
        });
    });

    var fardobs = null;    // this declared variable for use farmer DOB validation in #farmer_dob input box
    // code end

</script>
<script>
    function load_master_code() {
        try {

            var data = {};
            data.screen_Id = "FARMREG";
            var tab_values = ajaxcall_param("/Home/screenId_mastercodelist", JSON.stringify(data));
        }
        catch (err) {
            javascript_log4j_root(arguments.callee.name, err);
        }
    }

</script>
<script>
    function Uploadview(e, dataItem, grid) {
        debugger
        $("#dialogFileuploadView").kendoWindow();
        var dialog = $("#dialogFileuploadView").data("kendoWindow");
        dialog.open().element.closest(".k-window").css({
            top: 121,
            left: 300, height: 400, width: 500
        });
        dialog.title("KYC Photo");
        //dialog.bind("open", serialnoview);
        var imagedata = dataItem.in_photo_kyc
        if (imagedata != "")
            document.getElementById("farmer_kyc_img").src = "data:image/png;base64," + imagedata;
        else
            document.getElementById("farmer_kyc_img").src = "/images/noimage.png";
    }
    $("#farmerfile").change(function () {
        readURL(this);
    });

    function readURL(input) {
        if (input.files && input.files[0]) {
            var reader = new FileReader();
            reader.onload = function (e) {
                $('#farmer_img').attr('src', e.target.result);
            }
            reader.readAsDataURL(input.files[0]);

        }
    }

    //var data = [];                KYC GRID
    function Kycgrid(data) {
        try {
            $("#Kycgrid").kendoGrid({
                dataSource: {
                    data: data,
                    schema: {
                        model: {
                            fields: {
                                in_farmerkyc_rowid: { type: "number", validation: { required: { message: "Row. No cannot be blank" } } },
                                in_proof_type: { type: "string", required: true },
                                in_proof_type_desc: {
                                    validation: {
                                        dropdownlistValidation: function (input) {
                                            if (input.is("[name='proof_type_desc']")) {
                                                var isValid = true;
                                                input.attr("data-dropdownlistValidation-msg", "Proof Type cannot be blank"); if (input.val().length <= 0) {
                                                    isValid = false;
                                                }
                                                return isValid;
                                            }
                                            return true;
                                        }
                                    }
                                },
                                in_proof_doc: { type: "string", required: true },
                                in_proof_doc_desc: {
                                    validation: {
                                        dropdownlistValidation: function (input) {
                                            if (input.is("[name='proof_doc_desc']")) {
                                                var isValid = true;
                                                input.attr("data-dropdownlistValidation-msg", "Proof Document cannot be blank"); if (input.val().length <= 0) {
                                                    isValid = false;
                                                }
                                                return isValid;
                                            }
                                            return true;
                                        }
                                    }
                                },
                                in_proof_doc_no: { type: "string" },
                                in_proof_doc_adharno: { type: "string", defaultValue: "" },
                                in_proof_valid_till: { type: "date", defaultValue: "" },
                                in_status_code: { type: "string", defaultValue: "A" },
                                in_status_desc: { type: "string", defaultValue: getlocalStorage('status'), editable: true },
                                in_mode_flag: { type: "string", defaultValue: "I" },
                                in_photo_kyc: { type: "string" },
                            }
                        }
                    }
                },
                scrollable: false,
                resizable: true,
                toolbar: "<a class='k-grid-add' id='btnSave' href=''><span class='fa fa-plus' style='color:Black'></span></a>",
                height: 400,
                groupable: false,
                dataBinding: setDefaultValues,
                edit: function (e) {
                    var columnIndex = this.cellIndex(e.container);
                    var fieldName = this.thead.find("th").eq(columnIndex).data("field");
                    if (fieldName == "proof_doc_adharno") {
                        if (e.model.in_proof_doc != 'QCD_PRFI_AADHAR') {
                            setlocalStorage("adhar", "other");
                            this.closeCell(); // prevent editing
                        }
                    }
                },
                dataBound: function (e) {
                    resultData = e.sender._data;
                    var rows = $('#Kycgrid').data('kendoGrid').tbody.children();
                    setColor(rows, resultData);
                },
                edit: OnEdit2,
                sortable: true,
                selectable: true,
                navigatable: true,
                columns: [{
                    command: [
                        {
                            name: "Delete",
                            id: "Delete",
                            imageClass: "fa fa-close",
                            click: function (e) {
                                // e.preventDefault();
                                var grid = $("#Kycgrid").data("kendoGrid");
                                var dataItem = $("#Kycgrid").data("kendoGrid").dataItem($(e.target).closest("tr"));
                                DeleteWindowEvent(e, dataItem, grid);
                                e.stopImmediatePropagation()
                            }
                        },
                    ], title: "Action", width: "25px",
                },
                {
                    field: "in_farmerkyc_rowid",
                    title: "Row Id",
                    width: 100,
                    hidden: true,
                },
                {
                    field: "in_proof_type",
                    title: "proof type On",
                    hidden: true,
                    width: 1
                },
                {
                    field: "in_proof_type_desc",
                    title: "Proof Type",
                    editor: function (container, options) {
                        combo_editor_man(container, "cmb_" + options.field, eval(options.field + "_list"), options.field, "in_proof_type", "Kycgrid")
                    },
                    width: 100
                },

                {
                    field: "in_proof_doc",
                    title: "proof Sub-Type",
                    hidden: true,
                    width: 1
                },

                {
                    field: "in_proof_doc_desc",
                    title: "Proof Sub-Type",
                    editor: function (container, options) {
                        debugger;
                        combo_dependent_ProofType(container, "cmb_" + options.field, eval(options.field + "_list"), options.field, "Kycgrid", "in_proof_doc")
                        },
                    width: 100
                },

                {
                    field: "['in_proof_doc_no']",
                    title: "Document No",
                    width: 100,
                    //template: "#: proof_doc_no.replace(/^\\d{8}|\\d{12}$/g, \'XXXX\') #",
                    template: "#if(in_proof_doc == 'QCD_PRFI_AADHAR') { # #: in_proof_doc_no.replace(/^([0-9]+)([0-9]{0})$/, \'XXXXXXXXXXXX\')# #} else {# #:in_proof_doc_no # # } #",
                    editor: function (container, options) {
                        var grid = $("#Kycgrid").data("kendoGrid");
                        var selectedItem = grid.dataItem(grid.select());
                        setlocalStorage("mask", selectedItem);
                        var mask_data = getlocalStorage("mask");
                        if (mask_data.in_proof_doc == 'QCD_PRFI_AADHAR') {
                            $('<input data-text-field="' + options.field + '" ' +
                                'class="k-input k-textbox" ' +
                                'type="password" ' +
                                'maxlength="12"' +
                                'onkeypress="return IsNumeric(event);" ondrop="return false;" onpaste="return false;" ' +
                                'data-value-field="' + options.field + '" '
                                +
                                'data-bind="value:' + options.field + '"/>'
                            )
                                .appendTo(container)
                        }
                        else if (mask_data.in_proof_doc == 'QCD_PRFI_PAN') {
                            $('<input data-text-field="' + options.field + '" ' +
                                'class="k-input k-textbox" ' +
                                'maxlength="10"' +
                                //'data-value-update="keyup"'+
                                //'onblur="return validate(event);" ondrop="return false;" onpaste="return false;" ' +
                                'data-bind="value:' + options.field + '"/>'
                            )
                                .appendTo(container)
                        }
                        else {
                            $('<input data-text-field="' + options.field + '" ' +
                                'class="k-input k-textbox" ' +
                                'data-bind="value:' + options.field + '"/>'
                            )
                                .appendTo(container)
                        }
                    }
                },
                {
                    field: "['in_proof_doc_adharno']",
                    title: "Confirm Document No",
                    width: 100,
                    template: "#if(in_proof_doc == 'QCD_PRFI_AADHAR') { # #: in_proof_doc_adharno.replace(/^([0-9]+)([0-9]{0})$/, \'XXXXXXXXXXXX\')# #} else {# #:in_proof_doc_adharno # # } #",
                    //template: "#: proof_doc_adharno.replace(/^\\d{8}|\\d{12}$/g, \'XXXX\') #",
                    //template: 'XXXXXXXXXXXX',
                    //template: "#: proof_doc_adharno.replace(/^([0-9]+)([0-9]{0})$/, \'XXXXXXXXXXXX\') #",
                    editor: function (container, options) {
                        var grid = $("#Kycgrid").data("kendoGrid");
                        var selectedItem = grid.dataItem(grid.select());
                        setlocalStorage("maskcmp", selectedItem);
                        var maskcmp_data = getlocalStorage("maskcmp");
                        if (maskcmp_data.in_proof_doc == 'QCD_PRFI_AADHAR') {
                            $('<input data-text-field="' + options.field + '" ' +
                                'class="k-input k-textbox" ' +
                                //'type="password" ' +
                                'maxlength="12"' +
                                'onkeypress="return IsNumeric(event);" ondrop="return false;" onpaste="return false;" ' +
                                'data-value-field="' + options.field + '" '
                                +
                                'data-bind="value:' + options.field + '"/>'
                            )
                                .appendTo(container)
                        }
                        else if (maskcmp_data.in_proof_doc == 'QCD_PRFI_PAN') {
                            $('<input data-text-field="' + options.field + '" ' +
                                'class="k-input k-textbox" ' +
                                'maxlength="10"' +
                                //'data-value-update="keyup"'+
                                //'onblur="return validate(event);" ondrop="return false;" onpaste="return false;" ' +
                                'data-bind="value:' + options.field + '"/>'
                            )
                                .appendTo(container)
                        }
                        else {
                            $('<input data-text-field="' + options.field + '" ' +
                                'class="k-input k-textbox" ' +
                                'data-bind="value:' + options.field + '"/>'
                            )
                                .appendTo(container)
                        }
                    },
                    hidden: true,
                },

                {
                    field: "in_proof_valid_till",
                    title: "Valid Till",
                    width: 100,
                    format: "{0:dd/MM/yyyy}",
                },
                {
                    command: [
                        {
                            name: "View",
                            id: "View",
                            text: "View",
                            click: function (e) {
                                var grid = $("#Kycgrid").data("kendoGrid");
                                var dataItem = $("#Kycgrid").data("kendoGrid").dataItem($(e.target).closest("tr"));
                                Uploadview(e, dataItem, grid);
                            }
                        },
                    ], title: "Photo Kyc", width: "25px",
                },
                {
                    field: "in_status_code",
                    title: "Status",
                    hidden: true,
                    width: 1

                },

                {
                    field: "in_status_desc",
                    title: "Status",
                    editor: function (container, options) {
                        combo_editor_man(container, "cmb_" + options.field, eval(options.field + "_list"), options.field, "in_status_code", "Kycgrid")
                    },
                    width: 100
                },

                {
                    field: "in_mode_flag",
                    title: "Mode",
                    hidden: true
                }],
                editable: true,



            });
        }

        catch (err) {
            javascript_log4j_root(arguments.callee.name, err);
        }
    }

    load_master_code();
    in_proof_type_desc_list = grid_comboScreen_mastercodes("QCD_PRFTYPE");
    in_proof_doc_desc_list = grid_comboScreen_mastercodes("QCD_PRFSUBTYPE");
    in_status_desc_list = grid_comboScreen_mastercodes("STATUS");
   
    function OnEdit2(e) {
        setDefaultValues(e);
        e.container.find("input[name='in_proof_doc_desc']").change(function () {
            var valueprd = $(this).val();
            var proofdoc =
                e.model.in_proof_doc_adharno = "";
            e.model.in_proof_doc_no = "";
            e.model.in_proof_doc_desc = valueprd;
            //  in_proof_doc_desc_list = grid_comboScreen_mastercodes("QCD_PRF_ID");
            // var kycgrid = $("#Kycgrid").data("kendoGrid");
            // kycgrid.dataSource.sync();
            return false;
        });
    }
    function combo_dependent_ProofType(container, cmbid, datasource, datafield, grid_id, code_datafield) {
        debugger;
        try {
            var cus_arr = [];
            var grid = $("#" + grid_id).data("kendoGrid");
            var selectedItem = grid.dataItem(grid.select());
            var prooftype = selectedItem.in_proof_type_desc;

            $.each(datasource, function (key, val) {
                if (datasource[key].dependent == prooftype) {
                    cus_arr.push(datasource[key]);
                }
            });

            var data = cus_arr;

            $('<input  id="' + cmbid + '" data-text-field="desc" data-value-field="desc" data-bind="value:' + datafield + '" name ="' + datafield + '"/>').appendTo(container).kendoComboBox({
                autoBind: false,
                filter: "contains",
                dataSource: data,
                change: function (e) {
                    var cmb_value = this.value();
                    if (cmb_value && this.selectedIndex == -1) {
                        this.value("");
                    }
                    var cmb_var = $("#" + grid_id).data("kendoGrid");
                    var selectedItem = cmb_var.dataItem(cmb_var.select());
                    var combobox_data = $("#" + cmbid).data("kendoComboBox");
                    if (combobox_data != undefined && combobox_data.selectedIndex == -1) {
                        selectedItem[datafield] = "";
                        selectedItem[code_datafield] = "";
                    }
                    else {
                        selectedItem[datafield] = combobox_data.dataItem(combobox_data.selectedIndex).desc;
                        selectedItem[code_datafield] = combobox_data.dataItem(combobox_data.selectedIndex).code;
                    }
                }
            });
            $("<span class='k-invalid-msg' data-for='" + datafield + "'></span>").appendTo(container);
        }
        catch (err) {
            javascript_log4j_root(arguments.callee.name, err);
        }
    }
</script>

<script type="text/javascript">
    var specialKeys = new Array();
    specialKeys.push(8); //Backspace
    function IsNumeric(e) {
        var keyCode = e.which ? e.which : e.keyCode
        var ret = ((keyCode >= 48 && keyCode <= 57) || specialKeys.indexOf(keyCode) != -1);
        if (ret == "none") {
            ret = false;
        }
        return ret;
    }

    function ValidatePAN(Obj) {
        var panChk = true;
        if (Obj != "") {
            ObjVal = Obj;
            var panPat = /^([a-zA-Z]{5})(\d{4})([a-zA-Z]{1})$/;
            if (ObjVal.search(panPat) == -1) {
                return false;
            };
        }
        else
            return panChk;
    }
</script>

<script>
    //var data = [];
    var in_bank_acc_type_desc_list = "";
    var in_bank_desc_list = "";
    var in_dflt_cr_acc_desc_list = "";
    var in_dflt_dr_acc_desc_list = "";
    var in_status_desc_list = "";
    function Bankgrid(data) {
        try {
            $("#Bankgrid").kendoGrid({
                dataSource: {
                    data: data,
                    schema: {
                        model: {
                            fields: {
                                in_farmerbank_rowid: { type: "number", validation: { required: { message: "Row. No cannot be blank" } } },
                                in_bank_acc_no: { type: "string", validation: { required: { message: "Account. No cannot be blank" } } },
                                in_bank_acc_type: { type: "string", required: true },
                                in_bank_acc_type_desc: {
                                    validation: {
                                        dropdownlistValidation: function (input) {
                                            if (input.is("[name='bank_acc_type_desc']")) {
                                                var isValid = true;
                                                input.attr("data-dropdownlistValidation-msg", "Bank Account cannot be blank"); if (input.val().length <= 0) {
                                                    isValid = false;
                                                }
                                                return isValid;
                                            }
                                            return true;
                                        }
                                    }
                                },

                                in_bank_code: { type: "string", required: true },
                                in_bank_desc: {
                                    validation: {
                                        dropdownlistValidation: function (input) {
                                            if (input.is("[name='bank_desc']")) {
                                                var isValid = true;
                                                input.attr("data-dropdownlistValidation-msg", "Bank cannot be blank"); if (input.val().length <= 0) {
                                                    isValid = false;
                                                }
                                                return isValid;
                                            }
                                            return true;
                                        }
                                    }
                                },

                                in_branch_code: { type: "string" },
                                //branch_desc: {
                                //    validation: {
                                //        dropdownlistValidation: function (input) {
                                //            if (input.is("[name='branch_desc']")) {
                                //                var isValid = true;
                                //                input.attr("data-dropdownlistValidation-msg", "Branch cannot be blank"); if (input.val().length <= 0) {
                                //                    isValid = false;
                                //                }
                                //                return isValid;
                                //            }
                                //            return true;
                                //        }
                                //    }
                                //},

                                in_ifsc_code: { type: "string", editable: false, validation: { required: { message: "IFSC Code cannot be blank" } } },
                                in_dflt_cr_acc: { type: "string", required: true },
                                in_dflt_cr_acc_desc: {
                                    validation: {
                                        dropdownlistValidation: function (input) {
                                            if (input.is("[name='dflt_cr_acc_desc']")) {
                                                var isValid = true;
                                                input.attr("data-dropdownlistValidation-msg", "Default Credit cannot be blank"); if (input.val().length <= 0) {
                                                    isValid = false;
                                                }
                                                return isValid;
                                            }
                                            return true;
                                        }
                                    }
                                },

                                in_dflt_dr_acc: { type: "string", required: true },
                                in_dflt_dr_acc_desc: {
                                    validation: {
                                        dropdownlistValidation: function (input) {
                                            if (input.is("[name='dflt_dr_acc_desc']")) {
                                                var isValid = true;
                                                input.attr("data-dropdownlistValidation-msg", "Default Debit cannot be blank"); if (input.val().length <= 0) {
                                                    isValid = false;
                                                }
                                                return isValid;
                                            }
                                            return true;
                                        }
                                    }
                                },

                                // status_code: { type: "string", defaultValue: "A", required: true },


                                //status_desc: {
                                //    type: "string",
                                //    validation: {
                                //        dropdownlistValidation: function (input) {
                                //            if (input.is("[name='status_desc']")) {
                                //                var isValid = true;
                                //                input.attr("data-dropdownlistValidation-msg", "Status cannot be blank"); if (input.val().length <= 0) {
                                //                    isValid = false;
                                //                }
                                //                return isValid;
                                //            }
                                //            return true;
                                //        }
                                //    }
                                //},
                                in_status_code: { type: "string", defaultValue: "A" },
                                in_status_desc: { type: "string", defaultValue: getlocalStorage('status'), editable: false },
                                in_mode_flag: { type: "string", defaultValue: "I" }
                            }
                        }
                    }
                },
                toolbar: "<a class='k-grid-add' id='btnSave' href=''><span class='fa fa-plus' style='color:Black'></span></a>",
                height: 400,
                groupable: false,
                dataBinding: setDefaultValues,

                dataBound: function (e) {
                    resultData = e.sender._data;
                    var rows = $('#Bankgrid').data('kendoGrid').tbody.children();
                    setColor(rows, resultData);
                },
                edit: OnEdit,
                sortable: true,
                selectable: true,
                navigatable: true,
                columns: [{
                    command: [
                        {
                            name: "Delete",
                            id: "Delete",
                            imageClass: "fa fa-close",
                            click: function (e) {
                                // e.preventDefault();
                                var grid = $("#Bankgrid").data("kendoGrid");
                                var dataItem = $("#Bankgrid").data("kendoGrid").dataItem($(e.target).closest("tr"));
                                DeleteWindowEvent(e, dataItem, grid);
                                e.stopImmediatePropagation()
                            }
                        },

                    ], title: "Action", width: "35px",
                },
                {
                    field: "in_farmerbank_rowid",
                    title: "Row Id",
                    width: 100,
                    hidden: true,
                },
                {
                    field: "in_bank_acc_no",
                    title: "Account No",
                    width: 100,
                    editor: function (container, options) {
                        numeric_editor(container, options.field, '16', '0');
                    },
                },


                {
                    field: "in_bank_acc_type",
                    title: "Account Type On",
                    hidden: true,
                    width: 1

                },

                {
                    field: "in_bank_acc_type_desc",
                    title: "Account Type",
                    editor: function (container, options) {
                        combo_editor_man(container, "cmb_" + options.field, eval(options.field + "_list"), options.field, "in_bank_acc_type", "Bankgrid")
                    },
                    width: 100
                },

                {
                    field: "in_bank_code",
                    title: "bANK",
                    hidden: true,
                    width: 1

                },

                {
                    field: "in_bank_desc",
                    title: "Bank",
                    editor: function (container, options) {
                        combo_editor_man(container, "cmb_" + options.field, eval(options.field + "_list"), options.field, "in_bank_code", "Bankgrid")
                    },
                    width: 100
                },



                {
                    field: "in_branch_code",
                    title: "Branch",
                    editor: '<div class="input-group input-group-sm"><input type="text" id="bank" readonly name="in_branch_code" maxlength="50" style="width:190px;color:black"  onkeypress="return speical_char(event)" data-bind="value:in_branch_code"/><span class="input-group-btn" style="padding-right: 150px;"><a class="HelpWindow fa fa-search fa-lg" data-toggle="modal" href="/HelpFilter/HelpFilter" hdrtitle="Bank Details" searchid="S01" data-target="#HelpModal" onclick=transfer(this,"grid","Bankgrid","Bankgrid") title="Search" style="font-size: 15px; padding-left: 10px;color:white"></a> </span> </div>',
                    //  hidden: true,
                    width: 250,

                },

                //{
                //    field: "branch_desc",
                //    title: "Branch",
                //    editor: function (container, options) {
                //        combo_editor_man(container, "cmb_" + options.field, eval(options.field + "_list"), options.field, "in_branch_code", "Bankgrid")
                //    }, hidden: true,
                //    width: 100
                //},
                {
                    field: "in_ifsc_code",
                    title: "IFSC Code",
                    width: 100
                },
                {
                    field: "in_dflt_cr_acc",
                    title: "Credit",
                    hidden: true,
                    width: 1
                },
                {
                    field: "in_dflt_cr_acc_desc",
                    title: "Default Credit A/C",
                    editor: function (container, options) {
                        combo_editor_man(container, "cmb_" + options.field, eval(options.field + "_list"), options.field, "in_dflt_cr_acc", "Bankgrid")
                    },
                    width: 100
                },
                {
                    field: "in_dflt_dr_acc",
                    title: "Credit",
                    hidden: true,
                    width: 1

                },
                {
                    field: "in_dflt_dr_acc_desc",
                    title: "Default Debit A/C",
                    editor: function (container, options) {
                        combo_editor_man(container, "cmb_" + options.field, eval(options.field + "_list"), options.field, "in_dflt_dr_acc", "Bankgrid")
                    },
                    width: 100
                },
                {
                    field: "in_status_code",
                    title: "Status",
                    hidden: true,
                    width: 1

                },
                {
                    field: "in_status_desc",
                    title: "Status",
                    editor: function (container, options) {
                        combo_editor_man(container, "cmb_" + options.field, eval(options.field + "_list"), options.field, "in_status_code", "Bankgrid")
                    },
                    width: 100
                },
                {
                    field: "in_mode_flag",
                    title: "Mode",
                    hidden: true
                }],
                editable: true
            });
        }
        catch (err) {
            javascript_log4j_root(arguments.callee.name, err);
        }
    }

    load_master_code();
    in_bank_acc_type_desc_list = grid_comboScreen_mastercodes("QCD_BANKACCTYPE");
    in_bank_desc_list = grid_comboScreen_mastercodes("BANK");
    // branch_desc_list = grid_comboScreen_mastercodes("Branch");

    in_dflt_cr_acc_desc_list = grid_comboScreen_mastercodes("QCD_YESNO");
    in_dflt_dr_acc_desc_list = grid_comboScreen_mastercodes("QCD_YESNO");
    in_status_desc_list = grid_comboScreen_mastercodes("STATUS");
    function OnEdit(e) {
        setDefaultValues(e);
        if (e.model.in_bank_code == "") {
            e.container.find("input[name='in_branch_code']").prop('readonly', true);
            $("#bank").hide();
        } else {
            e.container.find("input[name='in_branch_code']").prop('readonly', false);
            $("#bank").show();
        }
        e.container.find("input[name='in_bank_code']").focusout(function () {
            e.model.in_branch_code = "";
            e.model.in_ifsc_code = "";
        });
        e.container.find("input[name='in_branch_code']").change(function () {
            if (e.model.in_bank_desc == "") {
                e.model.in_branch_code = "";
                e.model.in_ifsc_code = "";
            }
        });
    }
</script>
<script>
    function consentplusbtton() {
        /* var colCount = $("#Consentgrid").find('.k-grid-header colgroup > col').length;*/
        if ($("#Consentgrid").data("kendoGrid").dataSource._view.length > 0) {
            $("#Consentgrid .k-grid-toolbar").hide();
        } else {
            $("#Consentgrid .k-grid-toolbar").show();
        }
    }
    function consentclose() {
        $("#dialogconsent").data("kendoWindow").close();
        location.reload();
    }
    function consentcloseotp() {
        $("#dialogconsentotp").data("kendoWindow").close();
        consentclose();
    }
    function consentcloseattach() {
        $("#dialogconsentattach").data("kendoWindow").close();
        consentclose();
    }
    $("#farmerconsent").change(function () {
        readURL1(this);
    });

    function readURL1(input) {
        if (input.files && input.files[0]) {
            var reader = new FileReader();
            reader.onload = function (e) {
                $('#consent_img').attr('src', e.target.result);
            }
            reader.readAsDataURL(input.files[0]);
        }
    }
    function agreetermsandcondition() {
        if ($("#agreetm").is(':checked')) {
            $("#btn_agree").prop("disabled", true);
            $("#btn_disagree").prop("disabled", false);
            $("#disagreetm").prop("checked", false);
        } else {
            $("#btn_agree").prop("disabled", true);
            $("#btn_disagree").prop("disabled", true);
        }
    }
    function disagreetermsandcondition() {
        if ($("#disagreetm").is(':checked')) {
            $("#btn_agree").prop("disabled", false);
            $("#btn_disagree").prop("disabled", true);
            $("#agreetm").prop("checked", false);
        } else {
            $("#btn_agree").prop("disabled", true);
            $("#btn_disagree").prop("disabled", true);
        }
    }
    function attachverified() {
        if ($("#attachverified").is(':checked')) {
            $("#btn_submit1").prop("disabled", false);
        } else {
            $("#btn_submit1").prop("disabled", true);
        }
    }
    function captcha() {
        var a = Math.ceil(Math.random() * 9) + ' ';
        var b = Math.ceil(Math.random() * 9) + ' ';
        var c = Math.ceil(Math.random() * 9) + ' ';
        var d = Math.ceil(Math.random() * 9) + ' ';
        var e = Math.ceil(Math.random() * 9) + ' ';
        var f = Math.ceil(Math.random() * 9) + ' ';
        var g = Math.ceil(Math.random() * 9) + ' ';
        var code = a + b + c + d + e + f + g;
        $("#txtCaptcha").val(code);
    }
    function gridConsent(data) {
        try {
            $("#Consentgrid").kendoGrid({
                dataSource: {
                    data: data,
                    schema: {
                        model: {
                            fields: {
                                in_farmerconsent_rowid: { type: "string" },
                                in_template_id: { type: "string" },
                                in_consent_owner_id: { type: "string" },
                                in_consent_to: { type: "string" },
                                in_otp_flag: { type: "string" },
                                in_attachment_flag: { type: "string" },
                                in_isverified: { type: "string" },
                                in_mode_flag: { type: "string", defaultValue: "I" }
                            }
                        }
                    },
                },
                toolbar: "<a class='k-grid-add' id='' href='' onclick=consentdialog();><span class='fa fa-plus' style='color:Black'></span></a>",
                height: 240,
                sortable: false,
                selectable: true,
                navigatable: true,
                columns: [
                    {
                        field: "in_farmerconsent_rowid",
                        title: "farmerconsent_rowidd",
                        hidden: true
                    },
                    {
                        field: "in_template_id",
                        title: "Template Id",
                        width: 100,
                    },
                    {
                        field: "in_consent_owner_id",
                        title: "Consent Owner Id",
                        width: 100,
                    },
                    {
                        field: "in_consent_to_desc",
                        title: "Consent To",
                        width: 100,
                    },
                    {
                        field: "in_otp_flag",
                        title: "OTP",
                        width: 100,

                    },
                    {
                        field: "in_attachment_flag",
                        title: "Attachment",
                        width: 100,
                    },
                    {
                        field: "in_isverified_code",
                        title: "IS Verified",
                        width: 100,
                        hidden: true,
                    },
                    {
                        field: "in_isverified",
                        title: "IS Verified",
                        width: 100,
                    },
                    {
                        field: "in_mode_flag",
                        title: "In_mode_flag",
                        hidden: true,
                        width: 130,
                    },

                    {
                        field: "template_consent",
                        title: "template_consent",
                        hidden: true,
                    },
                    {
                        field: "in_lang_code",
                        title: "In_lang_code",
                        hidden: true,
                    },
                    {
                        field: "in_consent_to",
                        title: "In_lang_code",
                        hidden: true,
                    },
                    {
                        field: "in_attach_consent",
                        title: "In_attach_consent",
                        hidden: true,
                    },
                    {
                        field: "in_mobile_no",
                        title: "In_mobile_no",
                        hidden: true,
                    },
                    {
                        field: "in_verified_date",
                        title: "In_verified_date",
                        hidden: true,
                    },
                    {
                        command: [
                            {
                                name: "View",
                                id: "View",
                                text: "View",
                                click: function (e) {
                                    var grid1 = $("#Consentgrid").data("kendoGrid");
                                    var dataItem1 = $("#Consentgrid").data("kendoGrid").dataItem($(e.target).closest("tr"));
                                    Uploadconsentviewedit(e, dataItem1, grid1);
                                }
                            },
                        ], title: "Consent", width: "50px",
                    },
                ],
                editable: true
            });
        }
        catch (err) {
            alert(err);
        }
    }
    function Uploadconsentviewedit(e, dataItem, grid) {
        debugger
        $("#dialogconsent").kendoWindow();
        var dialog = $("#dialogconsent").data("kendoWindow");
        dialog.open().element.closest(".k-window").css({
            top: 430,
            left: 110, height: 412, width: 1200
        });
        dialog.title("Consent View");

        $("#template_id").val(dataItem.in_template_id);
        $("#txtfarmer_code").val(dataItem.in_consent_owner_id);
        $("#combo_fpo").data("kendoComboBox").value(dataItem.in_consent_to);
        $("#combo_lang").val(dataItem.in_lang_code);
        $("#txtMobile_nocon").val(dataItem.in_mobile_no);
        $("#txtfarmerconsent").val(dataItem.template_consent);
        $("#in_attach_consent").val(dataItem.in_attach_consent);
        var otp = dataItem.in_otp_flag;
        document.getElementById("rd_otp").disabled = true;
        document.getElementById("rd_attach").disabled = true;
        document.getElementById("agreetm").disabled = true;
        if (otp == 'Y') {
            $("#rd_otp").prop("checked", true);
            $("#upoloadview").hide();
        }
        var attach = dataItem.in_attachment_flag;
        if (attach == 'Y') {
            $("#rd_attach").prop("checked", true);
            $("#upoloadview").show();
        }
        var verified = dataItem.in_isverified_code;
        var vercode = verified[0];
        if (vercode == "D") {
            $("#disagreetm").prop("checked", true);
        } else {
            $("#agreetm").prop("checked", true);
        }
        
        $("#combo_fpo").data("kendoComboBox").enable(false);
        $("#combo_lang").data("kendoComboBox").enable(false);
        Uploadconsentview();
    }
    function Uploadviewconsent() {
        $("#dialogFileuploadView").kendoWindow();
        var dialog = $("#dialogFileuploadView").data("kendoWindow");
        dialog.open().element.closest(".k-window").css({
            top: 121,
            left: 300, height: 400, width: 500
        });
        dialog.title("consent Photo");
        var imagedata = $("#in_attach_consent").val();
        if (imagedata != "")
            document.getElementById("farmer_kyc_img").src = "data:image/png;base64," + imagedata;
        else
            document.getElementById("farmer_kyc_img").src = "/images/noimage.png";
    }
    function consentdialog() {
        $("#dialogconsent").kendoWindow();
        var dialog = $("#dialogconsent").data("kendoWindow");
        dialog.open().element.closest(".k-window").css({
            top: 430,
            left: 110, height: 412, width: 1200
        });
        dialog.title("Consent View");
    }
    //$("#dialogconsent").data("kendoWindow").bind("close", function (e) {
    //    if (!confirm("Are you sure?"))
    //        e.preventDefault();
    //});
    function Uploadconsentview() {
        var langid = $("#combo_lang").val();
        var data = {};
        data.context = getContext();
        var Context = data.context;
        $.ajax({
            type: "POST",
            data: JSON.stringify({ userId: Context.userId, orgnId: Context.orgnId, locnId: Context.locnId, localeId: langid, instance: Context.locnId }),
            url: "/ListViewMaker/GetconstenttemplateList",
            dataType: "json",
            contentType: 'application/json; charset=utf-8',
            success: function (response) {

                if (response.context != null) {
                    generate_consent_header(response);
                }
                else {

                }
            },
            error: function (er) {
                alert(er)
                console.log(er)
            }

        });
    }
    function generate_consent_header(res) {
        $("#template_id").val(res.context.tempalteContextDtl[0].template_id.toString());
        var data = $("#txtFarmer_namecon").val();
        var data1 = $("#combo_fpo").data("kendoComboBox").text();
        let textcon = res.context.tempalteContextDtl[0].template_consent.toString();
        let resultconsent = textcon.replaceAll("###FPONAME###", data1);
        $("#TextAreaconsent").text(resultconsent);
    }

    function agreesave() {
        if ($("#rd_otp").is(':checked')) {
            $("#dialogconsentotp").kendoWindow();
            var dialog = $("#dialogconsentotp").data("kendoWindow");
            dialog.open().element.closest(".k-window").css({
                top: 541,
                left: 546, height: 106, width: 290
            });
            dialog.title("OTP");
            captcha();
            var otp = removeSpaces($("#txtCaptcha").val());
            senderid = "GNSAIN";
            mobile_no = "91" + $("#txtMobile_nocon").val();
            msg_desc = "Your OTP is " + otp + " Please click below link to view the Consent Form before keying the OTP http://169.38.77.190:82/TAC/TAC -FLEXICODE";
            $.ajax({
                type: "POST",
                data: JSON.stringify({ senderid: senderid, mobile_no: mobile_no, msg_desc: msg_desc }),
                url: "/ListViewMaker/Getsmsconsent",
                dataType: "json",
                contentType: 'application/json; charset=utf-8',
                success: function (response) {
                    if (response.errorMessage != "Success") {

                    }
                },
                error: function (er) {
                    alert(er)
                    console.log(er)
                }
            });
        }
        if ($("#rd_attach").is(':checked')) {
            $("#dialogconsentattach").kendoWindow();
            var dialog = $("#dialogconsentattach").data("kendoWindow");
            dialog.open().element.closest(".k-window").css({
                top: 476,
                left: 410, height: 340, width: 638
            });
            dialog.title("Attachment");

        }
    }
    function consentattach() {
        try {
            var xhr = new XMLHttpRequest();
            var fd = new FormData();
            xhr.onreadystatechange = function () {
                if (xhr.readyState == 4 && xhr.status == 200) {
                    var value = JSON.parse(xhr.responseText);
                    if (value.result != undefined) {
                        $("#txtfarmerconsent").val(value.result);
                    }
                    consentsave();
                }
            };

            fd.append("file", document.getElementById('farmerconsent').files[0]);
            fd.append("userID", $('#txtUserId').val());
            xhr.open("POST", "/UserDefinition/User/", true);
            xhr.send(fd);
            xhr.addEventListener("load", function (event) {
            }, false);
        }
        catch (err) {
            javascript_log4j_root(arguments.callee.name, err);
        }
    }
    function Validotp() {
        var str1 = removeSpaces($("#txtCaptcha").val());
        var str2 = removeSpaces($("#otp_no").val());
        if (str2 != "") {
            if (str1 == str2) {
                consentsave();
                return true;

            }
            else {
                kendoAlert("captcha mismatch");
                return false;
            }
        }
    }
    function consentsave() {
        var formval = form_Serialize("farmer_consent");
        var obj_val = JSON.parse(formval);
        obj_val.In_template_id = $("#template_id").val();
        obj_val.In_consent_owner_id = $("#txtfarmer_code").val();
        obj_val.In_consent_to = $("#combo_fpo").val();
        obj_val.In_lang_code = $("#combo_lang").val();
        obj_val.In_status_code = $("#In_status_code").val();
        obj_val.In_mode_flag = $("#In_mode_flag").val();
        obj_val.In_mobile_no = $("#txtMobile_nocon").val();
        obj_val.In_otp = removeSpaces($("#txtCaptcha").val());
        obj_val.In_attach_consent = $("#txtfarmerconsent").val();
        if ($("#agreetm").is(':checked')) {
            obj_val.In_isverified = 'Y';
        } else {
            obj_val.In_isverified = 'D';
        }
        if ($("#rd_otp").is(':checked')) {
            obj_val.In_otp_flag = 'Y';
        }
        else {
            obj_val.In_otp_flag = 'N';
        }
        if ($("#rd_attach").is(':checked')) {
            obj_val.In_attachment_flag = 'Y';
        }
        else {
            obj_val.In_attachment_flag = 'N';
        }
        var data = {};
        data.context = getContext();
        data.context.Header = obj_val;
        var Context = data.context;
        $.ajax({
            type: "POST",
            data: JSON.stringify({ userId: Context.userId, orgnId: Context.orgnId, locnId: Context.locnId, localeId: Context.localeId, Header: Context.Header }),
            url: "/ListViewMaker/consentsave",
            dataType: "json",
            contentType: 'application/json; charset=utf-8',
            success: function (response) {
                debugger;
                if (response.context != null) {
                    if (response.context.Header.In_farmerconsent_rowid > 0) {
                        kendoAlert("Consent Saved Successfully");
                    }
                    consentcloseattach();
                    consentcloseotp();
                }
                else {

                }
            },
            error: function (er) {
                alert(er)
                console.log(er)
            }
        });
    }
</script>
<script>

    function grid_control() {
        var control_Name = [
            { "dataCol": "branch_name", "grid_row_col": "in_branch_code" },
            { "dataCol": "ifsc_code", "grid_row_col": "in_ifsc_code" },
            { "dataCol": "", "grid_row_col": "in_bank_code" },
            { "dataCol": "", "grid_row_col": "in_bank_desc" },
            { "dataCol": "", "grid_row_col": "in_farmerbank_rowid" },
            { "dataCol": "", "grid_row_col": "in_bank_acc_no" },
            { "dataCol": "", "grid_row_col": "in_bank_acc_type" },
            { "dataCol": "", "grid_row_col": "in_bank_acc_type_desc" },
            { "dataCol": "", "grid_row_col": "in_dflt_dr_acc" },
            { "dataCol": "", "grid_row_col": "in_dflt_dr_acc_desc" },
            { "dataCol": "", "grid_row_col": "in_dflt_cr_acc" },
            { "dataCol": "", "grid_row_col": "in_dflt_cr_acc_desc" },
            //{"dataCol": "A", "grid_row_col": "in_status_code" },
            //{"dataCol": "Active", "grid_row_col": "status_desc" },
            { "dataCol": "", "grid_row_col": "in_status_code" },
            { "dataCol": "", "grid_row_col": "in_status_desc" },
            { "dataCol": "", "grid_row_col": "in_mode_flag" },
            { "dataCol": "", "grid_row_col": "uid" }
        ];
        return control_Name
    }
    function form_control() {
        var control_Name = [

            { "dataCol": "orgn_village_desc", "controlId": "combo_village_1", "type": "Text" },
            { "dataCol": "village_ll_desc", "controlId": "combo_village1_1", "type": "Text" },
            { "dataCol": "orgn_village", "controlId": "combo_mst_village", "type": "Text" },

            { "dataCol": "orgn_hamlet_desc", "controlId": "txtaddress2En", "type": "Text" },
            { "dataCol": "hamlet_ll_desc", "controlId": "txtaddress2In", "type": "Text" },
            { "dataCol": "orgn_hamlet", "controlId": "combo_mst_hamlet", "type": "Text" },

            { "dataCol": "orgn_grampan_desc", "controlId": "combo_grampanchayat_1", "type": "Text" },
            { "dataCol": "grampan_ll_desc", "controlId": "combo_grampanchayat2_1", "type": "Text" },
            { "dataCol": "orgn_grampan", "controlId": "combo_mst_grampanchayat", "type": "Text" },

            { "dataCol": "orgn_taluk_desc", "controlId": "combo_taluk_1", "type": "Text" },
            { "dataCol": "taluk_ll_desc", "controlId": "combo_taluk1_1", "type": "Text" },
            { "dataCol": "orgn_taluk", "controlId": "combo_mst_taluk", "type": "Text" },

            { "dataCol": "orgn_dist_desc", "controlId": "combo_district_1", "type": "Text" },
            { "dataCol": "dist_ll_desc", "controlId": "combo_district1_1", "type": "Text" },
            { "dataCol": "orgn_dist", "controlId": "combo_mst_district", "type": "Text" },
        ];
        return control_Name
    }
    function controlName() {
        var control_Name = [
        ];
        return control_Name
    }

    function trans_input_data() {
        var trans_coll = [
            { "trasfer": "NO", "dataCol": "", "controlId": "", "grid_id": "", "grid_row_col": "" },
            { "trasfer": "Yes", "dataCol": "in_bank_code", "controlId": "", "grid_id": "Bankgrid", "grid_row_col": "" },
            { "trasfer": "Yes", "dataCol": "orgn_state_desc", "controlId": "combo_mst_state", "grid_id": "", "grid_row_col": "" },
            //{"trasfer": "Yes", "dataCol": "in_orgn_state_desc", "controlId": "combo_state1", "grid_id": "", "grid_row_col": "" },

            //{"trasfer": "Yes", "dataCol": "farmer_village", "controlId": "combo_villagecode", "grid_id": "", "grid_row_col": "village" },
            //{"trasfer": "Yes", "dataCol": "farmer_panchayat", "controlId": "combo_grampanchayatcode", "grid_id": "", "grid_row_col": "panchayat" },
            //{"trasfer": "Yes", "dataCol": "farmer_dist", "controlId": "combo_districtcode", "grid_id": "", "grid_row_col": "District" },
            //{"trasfer": "Yes", "dataCol": "farmer_taluk", "controlId": "combo_talukcode", "grid_id": "", "grid_row_col": "taluk" },
            //{"trasfer": "Yes", "dataCol": "farmer_state", "controlId": "combo_statecode", "grid_id": "", "grid_row_col": "state" },
            //{"trasfer": "Yes", "dataCol": "farmer_country", "controlId": "combo_countrycode", "grid_id": "", "grid_row_col": "country" },
            ///*End*/
            //{"trasfer": "NO", "dataCol": "", "controlId": "", "grid_id": "", "grid_row_col": "" },
            // {"trasfer": "Yes", "dataCol": "state_code", "controlId": "", "grid_id": "", "grid_row_col": "" },

            //{"trasfer": "Yes", "dataCol": "orgn_grampan", "controlId": "combo_grampanchayat", "grid_id": "", "grid_row_col": "panchayat" },
            //{"trasfer": "Yes", "dataCol": "orgn_dist", "controlId": "combo_district", "grid_id": "", "grid_row_col": "District" },
            //{"trasfer": "Yes", "dataCol": "orgn_taluk", "controlId": "combo_taluk", "grid_id": "", "grid_row_col": "taluk" },

        ];
        return trans_coll;
    }
</script>
<script type="text/javascript">
    function generate_farmer_registration_header(res) {
        try {
            $("#farmer_rowid").val(res.in_farmer_rowid);
            $("#farmer_code").val(res.in_farmer_code);
            $("#txtcommon_id").val(res.in_farmer_code);
            $("#version_no").val(res.in_version_no);
            $("#txtmember_idEng").val(res.in_member_id);
            $("#txtFPO_nameEng").val(res.in_fpo_name);
            $("#txtFarmer_nameEng").val(res.in_farmer_name);
            $("#txtFarmer_nameTn").val(res.in_farmer_ll_name);
            if ($("#txtFarmer_nameEng").val() == $("#txtFarmer_nameTn").val() || $("#txtFarmer_nameTn").val() == "" || check($('#txtFarmer_nameTn').val()) == true) {

                langTranslate1('txtFarmer_nameEng', 'txtFarmer_nameTn');
            }
            $("#txtsurname").val(res.in_sur_name);
            $("#txtsurname_II").val(res.in_sur_ll_name);
            $("#txtFHW_nameEN").val(res.in_fhw_name);
            $("#farmer_dob").val(res.in_farmer_dob);
            if ($("#txtsurname").val() == $("#txtsurname_II").val() || $("#txtsurname_II").val() == "" || check($('#txtsurname_II').val()) == true) { langTranslate1('txtsurname', 'txtsurname_II'); }
            $("#farmer_dob2").val(res.in_farmer_dob);
            $("#txtaddressEn").val(res.in_farmer_addr1);
            //$("#txtaddress2En").val(res.farmer_addr2);
            $("#txtFHW_nameIN").val(res.in_fhw_ll_name);
            if ($("#txtFHW_nameEN").val() == $("#txtFHW_nameIN").val() || $("#txtFHW_nameIN").val() == "" || check($('#txtFHW_nameIN').val()) == true) { langTranslate1('txtFHW_nameEN', 'txtFHW_nameIN'); }

            $("#txtaddressIn").val(res.in_farmer_ll_addr1);
            //$("#txtaddress2In").val(res.farmer_ll_addr2);

            if ($("#txtaddressEn").val() == $("#txtaddressIn").val() || $("#txtaddressIn").val() == "" || check($('#txtaddressIn').val()) == true) { langTranslate1('txtaddressEn', 'txtaddressIn'); }
            $("#farmer_state").val(res.in_farmer_state);
            $("#farmer_dist").val(res.in_farmer_dist);
            $("#farmer_taluk").val(res.in_farmer_taluk);


            $("#farmer_panchayat").val(res.in_farmer_panchayat);
            $("#farmer_village").val(res.in_farmer_village);
            $("#pincode").val(res.in_farmer_pincode);
            $("#pincode2").val(res.in_farmer_pincode);
            $("#marital_status").val(res.in_marital_status);
            $("#gender_flag").val(res.in_gender_flag);
            $("#txtMobile_no").val(res.in_reg_mobile_no);
            $("#txtMobile_no1").val(res.in_reg_mobile_no);
            $("#TextArea1").val(res.in_reg_note);
            $("#status_code").val(res.in_status_code);
            $("#txtMode").val(res.in_mode_flag);
            $("#txtrow_timestamp").val(res.in_row_timestamp);
            $("#DocStat").val(res.in_status_desc);
            $("#txtImageHidden").val(res.in_photo_farmer);

            $("#txtFarmer_namecon").val(res.in_farmer_name);
            $("#txtMobile_nocon").val(res.in_reg_mobile_no);

            //txtaddress2En   txtaddress2In  combo_mst_hamlet

            $('#combo_state').data("kendoComboBox").value(res.in_farmer_state);
            $('#combo_state1').data("kendoComboBox").value(res.in_farmer_state_desc);

            $('#combo_gender').data("kendoComboBox").value(res.in_gender_flag);
            $('#combo_genderIN').data("kendoComboBox").value(res.in_gender_flag);

            /***Hamlet***/
            $("#txtaddress2En").val(res.in_farmer_addr2);
            $("#txtaddress2In").val(res.in_farmer_ll_addr2);
            if ($("#txtaddress2En").val() == $("#txtaddress2In").val() || $("#txtaddress2In").val() == "" || check($('#txtaddress2In').val()) == true) { langTranslate1('txtaddress2En', 'txtaddress2In'); }
            $('#combo_mst_hamlet').val(res.in_farmer_addr2);

            $('#combo_village_1').val(res.in_farmer_village_desc);
            $('#combo_village1_1').val(res.in_farmer_village_ll_desc);
            $('#combo_mst_village').val(res.in_farmer_village);
            if ($("#combo_village_1").val() == $("#combo_village1_1").val() || $("#combo_village1_1").val() == "" || check($('#combo_village1_1').val()) == true) { langTranslate1('combo_village_1', 'combo_village1_1'); }


            $('#combo_grampanchayat_1').val(res.in_farmer_panchayat_desc);
            $('#combo_grampanchayat2_1').val(res.in_farmer_panchayat_ll_desc);
            $('#combo_mst_grampanchayat').val(res.in_farmer_panchayat);
            if ($("#combo_grampanchayat_1").val() == $("#combo_grampanchayat2_1").val() || $("#combo_grampanchayat2_1").val() == "" || check($('#combo_grampanchayat2_1').val()) == true) { langTranslate1('combo_grampanchayat_1', 'combo_grampanchayat2_1'); }
            $('#combo_taluk_1').val(res.in_farmer_taluk_desc);
            $('#combo_taluk1_1').val(res.in_farmer_taluk_ll_desc);
            $('#combo_mst_taluk').val(res.in_farmer_taluk);
            if ($("#combo_taluk_1").val() == $("#combo_taluk1_1").val() || $("#combo_taluk1_1").val() == "" || check($('#combo_taluk1_1').val()) == true) { langTranslate1('combo_taluk_1', 'combo_taluk1_1') }



            $('#combo_district_1').val(res.in_farmer_dist_desc);
            $('#combo_district1_1').val(res.in_farmer_dist_ll_desc);
            $('#combo_mst_district').val(res.in_farmer_dist);
            if ($("#combo_district_1").val() == $("#combo_district1_1").val() || $("#combo_district1_1").val() == "" || check($('#combo_district1_1').val()) == true) { langTranslate1('combo_district_1', 'combo_district1_1') }


            //Code Introduced by venkat End 28-06-2020
            var profiledata = res.in_photo_farmer
            if (profiledata != "") {
                document.getElementById("farmer_img").src = "data:image/png;base64," + profiledata;
            }
            else {
                document.getElementById("farmer_img").src = "/images/noimage.png";
            }

            if ($("#combo_gender").val() == $("#combo_genderIN").val() || $("#combo_genderIN").val() == "" || check($('#combo_genderIN').val()) == true) { langTranslateCombo('combo_gender', 'combo_genderIN') }

            if ($("#combo_country").val() == $("#combo_country1").val() || $("#combo_country1").val() == "" || check($('#combo_country1').val()) == true) { langTranslateCombo('combo_country', 'combo_country1') }

            if ($("#combo_state1").data('kendoComboBox').text() == $("#combo_state1").data('kendoComboBox').text() || $("#combo_state1").val() == "" || check($('#combo_state1').val()) == true) { langTranslateCombo('combo_state', 'combo_state1') }


        }
        catch (err) {
            javascript_log4j_root(arguments.callee.name, err);
        }
    }

    function langTranslate1(src, dest) {
                var id = $('#' + src).val();
                $("#HelpDiv").hide();
                if (id != "") {

                    $.ajax({
                        url: '@Url.Action("Foo", "ListViewMaker")',
                        type: 'GET',
                        dataType: 'json',
                        cache: false,
                        data: { 'id': id },
                        success: function (result) {
                            $('#' + dest).val(decodeEntities1(result));
                        },
                        error: function () {
                            $('#' + dest).val("");
                            alert('Google Translater Not working now. Try After some times');
                        }
                    });
                }
                else {
                    $('#' + dest).val("");
                    $("#HelpDiv").hide();
                }

            $('#' + dest).focus(function () {
                $("#HelpDiv").html("")
            });

            $("body").click(function () {
                $("#HelpDiv").hide();
            });
            $("tab_list").click(function () {
                $("#HelpDiv").hide();
            });
        }

        function decodeEntities1(input) {
            var y = document.createElement('textarea');
            y.innerHTML = input;
            return y.value;
        }
    function generate_farmer_registration_Kyc(res) {
        try {
            if (res != null) {
                var data = changedataType(res);
                Kycgrid(data);
            }
            else {
                Kycgrid([]);
            }
        }
        catch (err) {
            javascript_log4j_root(arguments.callee.name, err);
        }
    }

    function generate_farmer_registration_Bank(res) {
        try {
            if (res != null) {
                var data = changedataType(res);
                Bankgrid(data);
            }
            else {
                Bankgrid([]);
            }
        }
        catch (err) {
            javascript_log4j_root(arguments.callee.name, err);
        }
    }
    function generate_farmer_registration_consent(res) {
        try {
            if (res != null) {
                var data = changedataType(res);
                gridConsent(data);
            }
            else {
                gridConsent([]);
            }
        }
        catch (err) {
            javascript_log4j_root(arguments.callee.name, err);
        }
    }
    function save() {
        try {
            save_Image();
        }
        catch (err) {
            javascript_log4j_root(arguments.callee.name, err);
        }
    }

    function save_Image() {
        try {
            var xhr = new XMLHttpRequest();
            var fd = new FormData();
            xhr.onreadystatechange = function () {
                if (xhr.readyState == 4 && xhr.status == 200) {
                    var value = JSON.parse(xhr.responseText);
                    if (value.result != undefined) {
                        $("#txtImageHidden").val(value.result);
                    }
                    save_farmer();
                }
            };


            fd.append("file", document.getElementById('farmerfile').files[0]);
            fd.append("userID", $('#txtUserId').val());
            xhr.open("POST", "/UserDefinition/User/", true);
            xhr.send(fd);
            xhr.addEventListener("load", function (event) {
            }, false);
        }
        catch (err) {
            javascript_log4j_root(arguments.callee.name, err);
        }
    }

    function Qrcode_Gen(res) {

        var Farmercode = res;
        var data = {};
        data.context = getContext();
        var Context = data.context;
        $.ajax({
            type: "POST",
            data: JSON.stringify({ userId: Context.userId, orgnId: Context.orgnId, locnId: Context.locnId, localeId: Context.localeId, FarmerCode: Farmercode }),
            url: "/ListViewMaker/FarmerQRcode",
            dataType: "json",
            contentType: 'application/json; charset=utf-8',
            success: function (response) {

                var Res = JSON.parse(response);
                if (Res != null) {
                    var mode = $("#txtMode").val();
                    var profiledata = Res;
                    if (profiledata != "")
                        document.getElementById("farmer_Qrimg").src = "data:image/png;base64," + profiledata;
                    else
                        document.getElementById("farmer_Qrimg").src = "/images/noimage.png";
                }
            },
            error: function (er) {
                alert(er)
                console.log(er)
            }

        });

    }

    //code added by thianes 16.08.2021 start
    // code intruduced for get fardob in ("yyyy/mm/dd") -start
    function getFormated_StringDate1(date) {   //get DD/MM/YYYY or MM/DD/YYYYY
        if (date != "" || date != undefined) {
            var d = date.split("/");
            //return d[1] + "/" + d[0] + "/" + d[2];
            return d[2] + "/" + d[1] + "/" + d[0];
        }

    }

    function datevalidate_String(date) {
        if (date != "" || date != undefined) {
            var d1 = date.split("/");

            if (d1[2] < yyyy) {
                fardobs = 1;
            }
            else if (d1[2] == yyyy) {
                if (d1[1] < mm) {
                    fardobs = 1;
                }
                else if (d1[1] == mm) {
                    if (d1[0] <= dd) {
                        fardobs = 1;
                    }
                    else {
                        fardobs = 0;
                    }
                }
                else {
                    fardobs = 0;
                }
            }
            else {
                fardobs = 0;
            }
            return d1[0] + "/" + d1[1] + "/" + d1[2];
        }
    }
    //end

    function save_farmer() {

        try {
            var mandatory_check = true;
            var grid_validate_msg = "";
            var pan_check = true;
            if ($("#txtMode").val() == "S") {
                $("#txtMode").val('U');
            }

            $("#farmer_profile :input").prop("disabled", false);
            $("#combo_country").data("kendoComboBox").enable(true);
            $("#combo_state").data("kendoComboBox").enable(true);
            $("#combo_gender").data("kendoComboBox").enable(true);
            $("#txtFarmer_nameEng").attr("readonly", false);
            $("#txtFarmer_nameTn").attr("readonly", false);
            var formval = form_Serialize("farmer_profile");
            var obj_val = JSON.parse(formval);


            //Code Introduced by Venkat start 25-06-2020
            var mode = obj_val.in_mode_flag
            if (mode == "J") {
                $.each(obj_val, function (key, value) {

                    if (key == "in_reg_note" && value == "" || value == undefined || value == null) {
                        grid_validate_msg += "Reason Cannot be Blank <br>";
                        mandatory_check = false;
                    }

                });

                //Code Introduced by venkat start 28-06-2020 [ In checker login After Reject button click disabled Countrand state Gender]
                $("#combo_country").data("kendoComboBox").enable(false);
                $("#combo_state").data("kendoComboBox").enable(false);
                $("#combo_gender").data("kendoComboBox").enable(false);
                //Code Introduced by venkat end
                if (mandatory_check == false) {
                    kendoAlert(grid_validate_msg);
                    return false;
                }

            }

            //Code Introduced by Venkat end 25-06-2020

            if (obj_val.in_sur_name == "")
            {
                obj_val.in_sur_name = $("#txtFarmer_nameEng").val();
            }

            $("#txtFarmer_nameEng").attr("readonly", true);
            $("#txtFarmer_nameTn").attr("readonly", true);
            // code modified by thianes 16.08.2021  start
            if (obj_val.in_farmer_dob != '') {
                obj_val.in_farmer_dob = datevalidate_String(obj_val.in_farmer_dob);
            }

            if (obj_val.hasOwnProperty('in_farmer_dob')) {

                if (obj_val.in_farmer_dob != '' && fardobs == 1) {
                        obj_val.in_farmer_dob = getFormated_StringDate1(obj_val.in_farmer_dob);
                 }
                 else {
                        grid_validate_msg += "Please do not choose current or future date as DOB <br>";
                    mandatory_check = false;
                    $("#loader").fadeOut(0);
                    }
                }
          //end
            //Prema added for fpo farmer mapping on 12 apr 2022
            if (obj_val.in_fpo_orgncode == "") {
                var data1 = {};
                data1.context = getContext();
                obj_val.in_fpo_orgncode = data1.context.orgnId;
            }
             //end
            if (obj_val.in_row_timestamp == null || obj_val.in_row_timestamp == "" || obj_val.in_row_timestamp == undefined) {
                obj_val.in_row_timestamp = "2000-01-01";
            }
            var str = obj_val.in_reg_mobile_no;
            var pincode = obj_val.in_farmer_pincode;
            $.each(obj_val, function (key, value) {
                if (str.length > 10) {
                    grid_validate_msg += "Enter valid mobile no <br>";
                    mandatory_check = false;
                }
                if (str.substr(0, 1) == "0") {
                    grid_validate_msg += "Enter valid mobile no <br>";
                    mandatory_check = false;
                }
                //Code Introduced by Venkat  start 25-06-2020
                if (pincode.length < 6) {
                    grid_validate_msg += "Enter six digit Pincode <br>";
                    mandatory_check = false;
                } if (pincode.substr(0, 1) == "0") {
                    grid_validate_msg += "Enter six digit Pincode <br>";
                    mandatory_check = false;
                }
                //Code Introduced by Venkat  End 25-06-2020



                var grid_val = JSON.stringify($("#Kycgrid").data().kendoGrid._data);
                var Bind = {};
                Bind = grid_val;
                var result = JSON.parse(Bind);

                $.each(result, function (key, value) {
                    if (value.in_proof_type == "") {
                        grid_validate_msg += "Proof Type cannot be blank <br>";
                        mandatory_check = false;
                    }
                    if (value.in_proof_doc == "") {
                        grid_validate_msg += "Proof Sub Type cannot be blank <br>";
                        mandatory_check = false;
                    }
                    if (value.in_proof_doc_no == "" || value.in_proof_doc_no == " ") {

                        grid_validate_msg += "Document No cannot be blank <br>";
                        mandatory_check = false;
                    }

                    //This Code Introduced By Venkat 18-06-2020
                    //if (value.in_proof_doc_adharno == " " || value.in_proof_doc_adharno == "") {
                    //    grid_validate_msg += "Confirm Document No cannot be blank <br>";
                    //    mandatory_check = false;
                    //}
                    //if (value.in_proof_doc_no != value.in_proof_doc_adharno) {
                    //    grid_validate_msg += "Confirm Document No Does not Match <br>";
                    //    mandatory_check = false;
                    //}

                    //End

                    if (value.in_proof_doc_no != "" && value.in_proof_doc == 'QCD_PRFI_AADHAR') {
                        if (value.proof_doc_adharno == "") {
                            grid_validate_msg += "Confirm Document No cannot be blank <br>";
                            mandatory_check = false;
                        }
                        else if (value.in_proof_doc_no.length != 12) {
                            grid_validate_msg += "Aadhaar no. should be 12 digits  <br>";
                            mandatory_check = false;
                        }
                        else if (value.in_proof_doc_no != value.in_proof_doc_adharno) {
                            grid_validate_msg += "Confirm Document No Does not Match <br>";
                            mandatory_check = false;
                        }
                    }
                    if (value.in_proof_doc_no != "" && value.in_proof_doc == 'QCD_PRFI_PAN') {
                        if (value.in_proof_doc_no.length != 10) {
                            grid_validate_msg += "PAN no. should be 10 digits  <br>";
                            mandatory_check = false;
                        }
                        pan_check = ValidatePAN(value.in_proof_doc_no);
                        if (pan_check == false) {
                            grid_validate_msg += "Invalid PAN no. <br>";
                            mandatory_check = false;
                        }
                    }
                });

                if (mandatory_check == false) {
                    return false;
                }
            });


            var grid_val = JSON.stringify($("#Kycgrid").data().kendoGrid._data);
            var Bind = {};
            Bind = grid_val;
            var result = JSON.parse(Bind);

            //This code Introduced by Venkat 19-06-2020  [Kyc Rows Cannot be Duplicated]
            var oldproof;

            var reportRecipients = [];
            for (var i = 0; i < result.length; i++) {
                oldproof = result[i].in_proof_doc;
                reportRecipients.push(oldproof);
            }
            var recipientsArray = reportRecipients.sort();

            var reportRecipientsDuplicate = [];
            for (var i = 0; i < recipientsArray.length - 1; i++) {
                if (recipientsArray[i + 1] == recipientsArray[i]) {
                    reportRecipientsDuplicate.push(recipientsArray[i]);
                    kendoAlert("KYC Proof Sub Type Cannot be Duplicated");
                    return false;
                }

            }
           //End

            //This code Introduced by venkat 22-06-2020
            var DocumentNo;
            var rowdocumentno = [];
            for (var j = 0; j < result.length; j++) {
                DocumentNo = result[j].in_proof_doc_no;
                rowdocumentno.push(DocumentNo);
            }
            var rowdocumentnoarray = rowdocumentno.sort();
            var rowdocumentnoDuplicate = [];
            for (var j = 0; j < rowdocumentnoarray.length - 1; j++) {
                if (rowdocumentnoarray[j + 1] == rowdocumentnoarray[j]) {
                    rowdocumentnoDuplicate.push(rowdocumentnoarray[j]);
                    kendoAlert("KYC Document No Cannot be Duplicated");
                    return false;
                }
            }
            //end

            $.each(result, function (index, value) {
                var d = value.in_proof_valid_till;
                var date = kendo.parseDate(d);
                value = kendo.toString(date, "MM/dd/yyyy");
                result[index].in_proof_valid_till = value;
                result[index].in_proof_document = "0";
                result[index].in_document_no = "0";

                var kyc_rowid = result[index].in_farmerkyc_rowid;
                if (kyc_rowid == undefined || kyc_rowid == "") {
                    result[index].in_farmerkyc_rowid = "0";
                }
                var mmode = result[index].in_mode_flag;
                if (mmode == "S") {
                    result[index].in_mode_flag = "U";
                }
            });
            var obj_grid_val = result;
            var grid_val1 = JSON.stringify($("#Bankgrid").data().kendoGrid._data);
            var Bind1 = {};
            Bind1 = grid_val1;
            var result1 = JSON.parse(Bind1);
            var DefaultCreditAcc = "";
            var DefaultDebitAcc = "";
            var CreditCount = 0;
            var DebitCount = 0;
            $.each(result1, function (index, value) {

                var mmode = result1[index].in_mode_flag;
                if (mmode == "S") {
                    result1[index].in_mode_flag = "U";
                }

                var bank_rowid = result1[index].in_farmerbank_rowid;
                if (bank_rowid == undefined || bank_rowid == "") {
                    result1[index].in_farmerbank_rowid = "0";
                }
                DefaultCreditAcc = result1[index].in_dflt_cr_acc_desc;

                //Code Introduced by venkat start 27-06-2020
                if (DefaultCreditAcc == "" || DefaultCreditAcc == null || DefaultCreditAcc == undefined) {
                    grid_validate_msg += "DefaultCredit A/C cannot be blank <br>";
                    mandatory_check = false;
                }

                //Code Introduced by venkat End 27-06-2020

                if (DefaultCreditAcc == "Yes") {
                    CreditCount = CreditCount + 1;
                }
                DefaultDebitAcc = result1[index].in_dflt_dr_acc_desc;

                //Code Introduced by venkat start 27-06-2020
                if (DefaultDebitAcc == "" || DefaultDebitAcc == null || DefaultDebitAcc == undefined) {
                    grid_validate_msg += "DefaultDebit A/C cannot be blank <br>";
                    mandatory_check = false;
                }

                //Code Introduced by venkat End 27-06-2020
                if (DefaultDebitAcc == "Yes") {
                    DebitCount = DebitCount + 1;
                }
            });
            //code Introduced by venkat start 27-06-2020
            if (mandatory_check == false) {
                kendoAlert(grid_validate_msg);
                return false;
            }
            //code Introduced by venkat End 27-06-2020
            if ((CreditCount > 1) || (DebitCount > 1)) {
                kendoAlert("Change default Credit/ Debit Account Should not be More than One!!!");
                return false;
            }
            //if (DebitCount > 1) {
            //    kendoAlert("Change default Credit/ Debit to No for <<Account No.>> maintained already");
            //    return false;
            //}

            var obj_grid_val1 = result1;
            if (mandatory_check == true) {
                $("#loader").fadeIn();

                var data = {};
                data.context = getContext();
                data.context.Header = obj_val;
                data.context.KYC = obj_grid_val;
                data.context.Bank = obj_grid_val1;
                var data = {};
                data.context = getContext();
                data.context.Header = obj_val;
                data.context.KYC = obj_grid_val;
                data.context.Bank = obj_grid_val1;
                var Header = data.context.Header;
                var Bank = data.context.Bank;
                var KYC = data.context.KYC;
                var Context = data.context;
                $.ajax({
                    type: "POST",
                    data: JSON.stringify({ userId: Context.userId, orgnId: Context.orgnId, locnId: Context.locnId, localeId: Context.localeId, Header: Context.Header, KYC: Context.KYC, Bank: Context.Bank }),
                    url: "/ListViewMaker/SaveFarmer",
                    dataType: "json",
                    contentType: 'application/json; charset=utf-8',
                    success: function (response) {

                        var Res = response;
                        if (Res.ApplicationException.errorDescription == null || Res.ApplicationException.errorDescription == "") {
                            $("#loader").fadeOut(1000);
                            var mode = $("#txtMode").val();
                            Qrcode_Gen(Res.context.Header.in_farmer_code);
                            if (mode == "I") {
                                kendoAlert("Farmer registered successfully");
                                //code introduced by venkat start 27-06-2020
                                $("#combo_country").data("kendoComboBox").enable(false);
                                $("#combo_state").data("kendoComboBox").enable(false);
                                $("#combo_gender").data("kendoComboBox").enable(false);
                                //code introduced by venkat End 27-06-2020
                                get_farmer_registration_details(Res.context.Header.in_farmer_rowid, Res.context.Header.in_farmer_code, Res.context.Header.in_version_no);
                            }
                            else if (mode == "D") {
                                kendoAlert("Farmer Registration  Details Inactivate successfully");
                                get_farmer_registration_details(Res.context.Header.in_farmer_rowid, Res.context.Header.in_farmer_code, Res.context.Header.in_version_no);
                            }
                            else if (mode == "J") {
                                //code introduced by venkat start 27-06-2020
                                $("#combo_country").data("kendoComboBox").enable(false);
                                $("#combo_state").data("kendoComboBox").enable(false);
                                $("#combo_gender").data("kendoComboBox").enable(false);
                                //code introduced by venkat End 27-06-2020
                                kendoAlert("Application Rejected");
                                get_farmer_registration_details(Res.context.Header.in_farmer_rowid, Res.context.Header.in_farmer_code, Res.context.Header.in_version_no);
                            }
                            else if (mode == "A") {
                                //code introduced by venkat start 27-06-2020
                                $("#combo_country").data("kendoComboBox").enable(false);
                                $("#combo_state").data("kendoComboBox").enable(false);
                                $("#combo_gender").data("kendoComboBox").enable(false);
                                //code introduced by venkat End 27-06-2020
                                kendoAlert("Application Approved");
                                get_farmer_registration_details(Res.context.Header.in_farmer_rowid, Res.context.Header.in_farmer_code, Res.context.Header.in_version_no);
                            }
                            else if (mode == "U") {
                                kendoAlert("Farmer Details Updated Successfully");
                                //code introduced by venkat start 27-06-2020
                                $("#combo_country").data("kendoComboBox").enable(false);
                                $("#combo_state").data("kendoComboBox").enable(false);
                                $("#combo_gender").data("kendoComboBox").enable(false);
                                //code introduced by venkat End 27-06-2020
                                get_farmer_registration_details(Res.context.Header.in_farmer_rowid, Res.context.Header.in_farmer_code, Res.context.Header.in_version_no);
                                $('#divEdit #btnSaveEd').prop('disabled', true);
                            }
                            else {
                                //code introduced by venkat start 27-06-2020
                                $("#combo_country").data("kendoComboBox").enable(false);
                                $("#combo_state").data("kendoComboBox").enable(false);
                                $("#combo_gender").data("kendoComboBox").enable(false);
                                //code introduced by venkat End 27-06-2020
                                kendoAlert("Submitted for review");
                                get_farmer_registration_details(Res.context.Header.in_farmer_rowid, Res.context.Header.in_farmer_code, Res.context.Header.in_version_no);
                                $('#divEdit #reviewEd').prop('disabled', true);
                            }

                        }
                        else {

                            if (Res.ApplicationException.errorDescription == "Potential Duplicate") {
                                $("#dialog").kendoWindow();
                                var dialog = $("#dialog").data("kendoWindow");
                                dialog.open().element.closest(".k-window").css({
                                    top: 350,
                                    left: 554, height: 200, width: 450
                                });
                                dialog.title("Potential Duplicate Save Confirmation");
                                $("#btnAccept").show();
                                $("#btnCancel").show();
                                var data = {};
                                data.context = getContext();
                                data.context.Header = obj_val;
                                data.context.Header.in_dup_flag = "Y";
                                data.context.KYC = obj_grid_val;
                                data.context.Bank = obj_grid_val1;
                                var Context = data.context;
                                var grid_val3 = JSON.stringify(Context);
                                $("#hdduparray").val(grid_val3);

                            }
                            else {

                                //code introduced by venkat start 27-06-2020
                                $("#combo_country").data("kendoComboBox").enable(false);
                                $("#combo_state").data("kendoComboBox").enable(false);
                                $("#combo_gender").data("kendoComboBox").enable(false);
                                //code introduced by venkat End 27-06-2020
                                kendoAlert(Res.ApplicationException.errorDescription);
                                $("#loader").fadeOut(1000);
                            }
                        }
                    },
                    error: function (er) {
                        $("#loader").fadeOut(1000);
                        alert(er)
                        console.log(er)
                    }

                });
            }
        }
        catch (err) {
            javascript_log4j_root(arguments.callee.name, err);
        }
    }
    function PotentialDuplicate_Save(Context) {

        //var data = {};
        //data.context1 = getContext();
        //context1 = data.context1;

        var Context = JSON.parse(Context);
        $.ajax({
            type: "POST",
            data: JSON.stringify({ userId: Context.userId, orgnId: Context.orgnId, locnId: Context.locnId, localeId: Context.localeId, Header: Context.Header, KYC: Context.KYC, Bank: Context.Bank }),
            url: "/ListViewMaker/SaveFarmer",
            dataType: "json",
            contentType: 'application/json; charset=utf-8',
            success: function (response) {

                var Res = response;
                if (Res.ApplicationException.errorDescription == null || Res.ApplicationException.errorDescription == "") {
                    var mode = $("#txtMode").val();
                    Qrcode_Gen(Res.context.Header.in_farmer_code);
                    if (mode == "I") {
                        kendoAlert("Farmer registered successfully");
                        //code introduced by venkat start 27-06-2020
                        $("#combo_country").data("kendoComboBox").enable(false);
                        $("#combo_state").data("kendoComboBox").enable(false);
                        $("#combo_gender").data("kendoComboBox").enable(false);
                        //code introduced by venkat End 27-06-2020
                        get_farmer_registration_details(Res.context.Header.in_farmer_rowid, Res.context.Header.in_farmer_code, Res.context.Header.in_version_no);
                    }
                    else if (mode == "U") {
                        kendoAlert("Farmer Details Updated Successfully");
                        //code introduced by venkat start 27-06-2020
                        $("#combo_country").data("kendoComboBox").enable(false);
                        $("#combo_state").data("kendoComboBox").enable(false);
                        $("#combo_gender").data("kendoComboBox").enable(false);
                        //code introduced by venkat End 27-06-2020
                        get_farmer_registration_details(Res.context.Header.in_farmer_rowid, Res.context.Header.in_farmer_code, Res.context.Header.in_version_no);
                        $('#divEdit #btnSaveEd').prop('disabled', true);
                    }
                }
                else {
                    //code introduced by venkat start 27-06-2020
                    $("#combo_country").data("kendoComboBox").enable(false);
                    $("#combo_state").data("kendoComboBox").enable(false);
                    $("#combo_gender").data("kendoComboBox").enable(false);
                    //code introduced by venkat End 27-06-2020
                    kendoAlert(Res.ApplicationException.errorDescription);
                }
            }
        });
    }
    function get_farmer_registration_details(rowid, code, version) {
        try {
            var formval = form_Serialize("farmer_profile");
            var obj_val = JSON.parse(formval);
            obj_val.in_farmer_rowid = rowid;
            obj_val.in_farmer_code = code;
            obj_val.in_version_no = version;
            $("#txtcommon_id").val(code);
            var data = {};
            data.context = getContext();
            data.context.Header = obj_val;
            var Context = data.context;
            $.ajax({
                type: "POST",
                data: JSON.stringify({ userId: Context.userId, orgnId: Context.orgnId, locnId: Context.locnId, localeId: Context.localeId, Header: Context.Header }),
                url: "/ListViewMaker/GetFarmer",
                dataType: "json",
                contentType: 'application/json; charset=utf-8',
                success: function (response) {
                    var res = JSON.parse(response);
                    if (res.context != null) {
                        Qrcode_Gen(res.context.header.in_farmer_code);
                        generate_farmer_registration_header(res.context.header);
                        if (res.context.kyc != null) {
                            generate_farmer_registration_Kyc(res.context.kyc);
                        } else { generate_farmer_registration_Kyc([]); }
                        if (res.context.bank != null) {
                            generate_farmer_registration_Bank(res.context.bank);
                        } else { generate_farmer_registration_Bank([]); }
                    }
                    else {
                        console.log("Issue where Dropped");
                    }
                },
                error: function (er) {
                    console.log(er);
                }

            });
            $('#divEdit #reviewEd').prop('disabled', false);
            $('#divEdit #btnSaveEd').prop('disabled', true);
        }
        catch (err) {
            javascript_log4j_root(arguments.callee.name, err);
        }
    }

    function DeleteDetails() {
        try {
            $("#txtMode").val('D');
            save();
        }
        catch (err) {
            javascript_log4j_root(arguments.callee.name, err);
        }
    }

</script>

<style>
    .k-widget.k-tooltip {
        background-color: #ffe79e;
        color: #6b5100;
    }

    span.k-tooltip {
        white-space: pre-line;
    }

    .container {
        display: block;
        position: relative;
        padding-left: 35px;
        margin-bottom: 12px;
        cursor: pointer;
        font-size: 15px;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
    }
</style>
<script>
    $("#combo_gender").change(function () {
        var c = $('#combo_gender');
        var formval = c.data('kendoComboBox').value();
        $("#combo_genderIN").data("kendoComboBox").value(formval);
          if ($("#combo_gender").val() == $("#combo_genderIN").val() || $("#combo_genderIN").val() == "" || check($('#combo_genderIN').val()) == true) { langTranslateCombo('combo_gender', 'combo_genderIN') }
    });

    $("#combo_country").change(function () {
        var c = $('#combo_country');
        var formval = c.data('kendoComboBox').value();
        $("#combo_country1").data("kendoComboBox").value(formval);
    });
    //$("#combo_state").change(function () {
    //    var c = $('#combo_state');
    //    var formval = c.data('kendoComboBox').value();
    //    $("#combo_state1").data("kendoComboBox").value(formval);
    //});
    $("#combo_state").change(function () {
        cleartextbox();
        $('#pay_help21').show();

        var c = $('#combo_state');
        //var formval = c.data('kendoComboBox').value();
        var formval = c.data('kendoComboBox').value();
        var formval1 = c.data('kendoComboBox').text();

        $("#combo_state1").data("kendoComboBox").value(formval);
        $("#combo_mst_state").val(formval1);
        //Console.log(combo_mst_state);
    });
    $("#combo_village").change(function () {
        var c = $('#combo_village');
        var formval = c.data('kendoComboBox').value();
        $("#combo_village1").data("kendoComboBox").value(formval);

        var villcode = grid_comboScreen_deptcodes(formval);
        var villdept = villcode[0].dependent;

        var gmap_in = "";
        $("#combo_grampanchayat").empty();
        gmap_in = grid_comboScreen_deptcodes(villdept);
        var villagecode = gmap_in[0].code;
        var Panchacode = gmap_in[0].dependent;
        $("#combo_grampanchayat").data("kendoComboBox").value(villagecode);
        $("#combo_grampanchayat2").data("kendoComboBox").value($("#combo_grampanchayat").data("kendoComboBox").value());


        var gmap_in1 = "";
        $("#combo_taluk").empty();
        gmap_in1 = grid_comboScreen_deptcodes(Panchacode);
        var Pancode = gmap_in1[0].code;
        var talucode = gmap_in1[0].dependent;
        $("#combo_taluk").data("kendoComboBox").value(Pancode);
        $("#combo_taluk1").data("kendoComboBox").value($("#combo_taluk").data("kendoComboBox").value());

        var gmap_in2 = "";
        $("#combo_district").empty();
        gmap_in2 = grid_comboScreen_deptcodes(Pancode);
        var talcode = gmap_in1[0].code;
        var disckcode = gmap_in1[0].dependent;
        $("#combo_district").data("kendoComboBox").value(disckcode);
        $("#combo_district1").data("kendoComboBox").value($("#combo_district").data("kendoComboBox").value());
    });
    $("#combo_grampanchayat").change(function () {

        var c = $('#combo_grampanchayat');
        var formval = c.data('kendoComboBox').value();
        $("#combo_grampanchayat2").data("kendoComboBox").value(formval);
    });

    $("#combo_taluk").change(function () {
        var c = $('#combo_taluk');
        var formval = c.data('kendoComboBox').value();
        $("#combo_taluk1").data("kendoComboBox").value(formval);
    });
    $("#combo_district").change(function () {
        var c = $('#combo_district');
        var formval = c.data('kendoComboBox').value();
        $("#combo_district1").data("kendoComboBox").value(formval);
    });
    $("#farmer_dob").change(function () {
        var c = $('#farmer_dob').val();
        $("#farmer_dob2").val(c);
    });
    //created by thianes 07.08.2021
    $('#divEdit #reviewEd').click(function () {
        review();
    });
    $('#divCreate #review').click(function () {
        review();
    });
    //created by thianes 07.08.2021
    function review() {
        $("#txtMode").val('R');
        save();
        //$('#divEdit #reviewEd').attr('disabled', true);
        //$('#divEdit #btnSaveEd').attr('disabled', true);
    }

    function approve() {
        try {
            $("#txtMode").val('A');
            save();
            $("#combo_country").attr("readonly", "");
            $("#combo_village").attr("readonly", "");
            $("#combo_state").attr("readonly", "");
            $("#combo_gender").attr("readonly", "");
            $("#combo_country").data("kendoComboBox").enable(false);
            $("#combo_village").data("kendoComboBox").enable(false);
            $("#combo_state").data("kendoComboBox").enable(false);
            $("#combo_gender").data("kendoComboBox").enable(false);
            $("#farmerfile").removeAttr("readonly");
            $("#farmerfile").prop("disabled", true);
        }
        catch (err) {
            javascript_log4j_root(arguments.callee.name, err);
        }
    }

    function reject() {
        try {
            $("#txtMode").val('J');
            save();
            $("#combo_country").attr("readonly", "");
            $("#combo_village").attr("readonly", "");
            $("#combo_state").attr("readonly", "");
            $("#combo_gender").attr("readonly", "");
            $("#combo_country").data("kendoComboBox").enable(false);
            $("#combo_village").data("kendoComboBox").enable(false);
            $("#combo_state").data("kendoComboBox").enable(false);
            $("#combo_gender").data("kendoComboBox").enable(false);
            $("#farmerfile").removeAttr("readonly");
            $("#farmerfile").prop("disabled", true);
        }
        catch (err) {
            javascript_log4j_root(arguments.callee.name, err);
        }
    }


 var specialChars = "?";
var check = function(string){
    for(i = 0; i < specialChars.length;i++){
        if(string.indexOf(specialChars[i]) > -1){
            return true
        }
    }
    return false;
    }
    function langTranslateCombo(src, dest) {

          var id = $('#' + src).data('kendoComboBox').text()
                $("#HelpDiv").hide();
                if (id != "") {

                    $.ajax({
                        url: '@Url.Action("Foo", "ListViewMaker")',
                        type: 'GET',
                        dataType: 'json',
                        cache: false,
                        data: { 'id': id },
                        success: function (result) {
                           // $('#' + dest).val(decodeEntities1(result));
                            $('#' + dest).data('kendoComboBox').text(decodeEntities1(result));
                        },
                        error: function () {
                            alert('Google Translater Not working now. Try After some time');
                        }
                    });
                }
                else {
                    $('#' + dest).val("");
                    $("#HelpDiv").hide();
                }

            $('#' + dest).focus(function () {
                $("#HelpDiv").html("")
            });

            $("body").click(function () {
                $("#HelpDiv").hide();
            });
            $("tab_list").click(function () {
                $("#HelpDiv").hide();
            });
        }
    function Reslocal(Resourcelocal) {
        var result1 = JSON.stringify(Resourcelocal);
        var result = JSON.parse(result1);
        for (var i = 0; i < result.length; i++) {
            var screendata = result[i].data_field;
            var finalscreen = screendata.split("-");
            if (finalscreen[0] == 'gridBank') {
                $("#Bankgrid thead [data-field=" + result[i].control_code + "]").html(result[i].control_value);
            } else if (finalscreen[0] == 'gridKyc') {
                $("#Kycgrid thead [data-field=" + result[i].control_code + "]").html(result[i].control_value);
            } else {
                $("#" + result[i].control_code + "").text(result[i].control_value);
            }
        }
    }
    function get_hindi_lang() {
        langcodeloc("FARMREG");
    }
    function get_english_lang() {
        langcodeloc("FARMREG");
    }
</script>
<script src="~/CommonScripts/HelpFile.js"></script>
